{"version":3,"file":"2.18.0.js","mappings":"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","sources":["webpack://es/webpack/universalModuleDefinition","webpack://es/webpack/bootstrap","webpack://es/webpack/runtime/define property getters","webpack://es/webpack/runtime/hasOwnProperty shorthand","webpack://es/webpack/runtime/make namespace object","webpack://es/./src/position.ts","webpack://es/./src/constants.ts","webpack://es/./src/runtime/primitives/esprimitive.ts","webpack://es/./src/runtime/primitives/eserrorprimitive.ts","webpack://es/./src/runtime/primitives/esundefined.ts","webpack://es/./src/runtime/primitives/esobject.ts","webpack://es/./src/runtime/primitives/esfunction.ts","webpack://es/./src/runtime/functionCaller.ts","webpack://es/./src/runtime/context.ts","webpack://es/./src/runtime/primitives/esnamespace.ts","webpack://es/./src/runtime/primitives/esjsbinding.ts","webpack://es/./src/runtime/primitiveTypes.ts","webpack://es/./src/runtime/instantiator.ts","webpack://es/./src/runtime/primitives/estype.ts","webpack://es/./src/runtime/primitives/esnumber.ts","webpack://es/./src/runtime/primitives/esboolean.ts","webpack://es/./src/runtime/primitives/esarray.ts","webpack://es/./src/runtime/primitives/esstring.ts","webpack://es/./src/runtime/symbol.ts","webpack://es/./src/runtime/primitives/wrapStrip.ts","webpack://es/./src/util/colours.ts","webpack://es/./src/built-in/built-in-modules/ascii.ts","webpack://es/./src/built-in/built-in-modules/json.ts","webpack://es/./src/config.ts","webpack://es/./src/built-in/builtInModules.ts","webpack://es/./src/built-in/builtInFunctions.ts","webpack://es/./src/init.ts","webpack://es/./src/built-in/globalConstants.ts","webpack://es/./src/built-in/built-in-modules/time.ts","webpack://es/./src/built-in/built-in-modules/dom.ts","webpack://es/./src/runtime/argument.ts","webpack://es/./src/runtime/nodes.ts","webpack://es/./src/util/util.ts","webpack://es/./src/errors.ts","webpack://es/./src/parse/tokens.ts","webpack://es/./src/parse/lexer.ts","webpack://es/./src/parse/parser.ts","webpack://es/./src/index.ts","webpack://es/./src/built-in/nodeLibs.ts","webpack://es/./src/built-in/compiledSTD/std.txt.js","webpack://es/./src/built-in/compiledSTD/std.txt.py"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"es\"] = factory();\n\telse\n\t\troot[\"es\"] = factory();\n})(this, function() {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export class Position {\n    constructor(idx, ln, col, file = '(unknown)') {\n        this.idx = idx;\n        this.ln = ln;\n        this.col = col;\n        this.file = file;\n    }\n    advance(currentChar = '') {\n        this.idx++;\n        this.col++;\n        if (currentChar === '\\n') {\n            this.ln++;\n            this.col = 0;\n        }\n        return this;\n    }\n    get clone() {\n        return new Position(this.idx, this.ln, this.col, this.file);\n    }\n    get str() {\n        return `File ${this.file}, ${this.ln + 1}:${this.col + 1}`;\n    }\n    get isUnknown() {\n        return this.idx === -2;\n    }\n    static get void() {\n        return new Position(-2, -2, -2, '(unknown)');\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport PACKAGE_JSON from '../package.json';\nexport const digits = '0123456789';\nexport const identifierChars = '_$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\nexport const singleLineComment = '//';\nexport const multiLineCommentStart = '/*';\nexport const multiLineCommentEnd = '*/';\nexport let global;\nexport const setGlobalContext = (c) => void (global = c);\nexport const stringSurrounds = ['\\'', '`', '\"'];\nexport let IS_NODE_INSTANCE = typeof window === 'undefined';\nexport const runningInNode = () => void (IS_NODE_INSTANCE = true);\nexport const VAR_DECLARE_KEYWORDS = ['var', 'let', 'global'];\nexport const VERSION = PACKAGE_JSON['version'];\nexport const configFileName = 'esconfig.json';\nexport const VALID_FILE_ENCODINGS = [\n    'utf8', 'ucs2', 'utf16le', 'latin1',\n    'ascii', 'base64', 'base64url', 'hex'\n];\nexport const libs = {\n    print: console.log\n};\nexport const catchBlockErrorSymbolName = 'err';\nexport const KEYWORDS = [\n    'var',\n    'let',\n    'global',\n    'local',\n    'mutable',\n    'const',\n    'if',\n    'else',\n    'while',\n    'for',\n    'in',\n    'continue',\n    'break',\n    'func',\n    'return',\n    'yield',\n    'class',\n    'extends',\n    'namespace',\n    'export',\n    'try',\n    'catch'\n];\nexport let now = () => 0;\nexport function refreshPerformanceNow(IS_NODE_INSTANCE) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (IS_NODE_INSTANCE) {\n            now = () => Date.now();\n        }\n        else {\n            now = () => {\n                try {\n                    return performance === null || performance === void 0 ? void 0 : performance.now();\n                }\n                catch (e) {\n                    return 0;\n                }\n            };\n        }\n    });\n}\nrefreshPerformanceNow(IS_NODE_INSTANCE);\nexport var tokenType;\n(function (tokenType) {\n    tokenType[tokenType[\"NUMBER\"] = 0] = \"NUMBER\";\n    tokenType[tokenType[\"STRING\"] = 1] = \"STRING\";\n    tokenType[tokenType[\"ENDSTATEMENT\"] = 2] = \"ENDSTATEMENT\";\n    tokenType[tokenType[\"IDENTIFIER\"] = 3] = \"IDENTIFIER\";\n    tokenType[tokenType[\"KEYWORD\"] = 4] = \"KEYWORD\";\n    tokenType[tokenType[\"COMMA\"] = 5] = \"COMMA\";\n    tokenType[tokenType[\"ASSIGN\"] = 6] = \"ASSIGN\";\n    tokenType[tokenType[\"ADD\"] = 7] = \"ADD\";\n    tokenType[tokenType[\"SUB\"] = 8] = \"SUB\";\n    tokenType[tokenType[\"MUL\"] = 9] = \"MUL\";\n    tokenType[tokenType[\"DIV\"] = 10] = \"DIV\";\n    tokenType[tokenType[\"POW\"] = 11] = \"POW\";\n    tokenType[tokenType[\"MOD\"] = 12] = \"MOD\";\n    tokenType[tokenType[\"OPAREN\"] = 13] = \"OPAREN\";\n    tokenType[tokenType[\"CPAREN\"] = 14] = \"CPAREN\";\n    tokenType[tokenType[\"OBRACES\"] = 15] = \"OBRACES\";\n    tokenType[tokenType[\"CBRACES\"] = 16] = \"CBRACES\";\n    tokenType[tokenType[\"OSQUARE\"] = 17] = \"OSQUARE\";\n    tokenType[tokenType[\"CSQUARE\"] = 18] = \"CSQUARE\";\n    tokenType[tokenType[\"EQUALS\"] = 19] = \"EQUALS\";\n    tokenType[tokenType[\"NOTEQUALS\"] = 20] = \"NOTEQUALS\";\n    tokenType[tokenType[\"NOT\"] = 21] = \"NOT\";\n    tokenType[tokenType[\"GT\"] = 22] = \"GT\";\n    tokenType[tokenType[\"LT\"] = 23] = \"LT\";\n    tokenType[tokenType[\"GTE\"] = 24] = \"GTE\";\n    tokenType[tokenType[\"LTE\"] = 25] = \"LTE\";\n    tokenType[tokenType[\"AND\"] = 26] = \"AND\";\n    tokenType[tokenType[\"OR\"] = 27] = \"OR\";\n    tokenType[tokenType[\"COLON\"] = 28] = \"COLON\";\n    tokenType[tokenType[\"DOT\"] = 29] = \"DOT\";\n    tokenType[tokenType[\"EOF\"] = 30] = \"EOF\";\n    tokenType[tokenType[\"PIPE\"] = 31] = \"PIPE\";\n    tokenType[tokenType[\"APMERSAND\"] = 32] = \"APMERSAND\";\n    tokenType[tokenType[\"BITWISE_NOT\"] = 33] = \"BITWISE_NOT\";\n    tokenType[tokenType[\"QM\"] = 34] = \"QM\";\n})(tokenType || (tokenType = {}));\nexport let tt = tokenType;\nexport const tokenTypeString = {\n    [tt.NUMBER]: 'Number',\n    [tt.STRING]: 'String',\n    [tt.ENDSTATEMENT]: ';',\n    [tt.IDENTIFIER]: 'Identifier',\n    [tt.KEYWORD]: 'Keyword',\n    [tt.COMMA]: ',',\n    [tt.OBRACES]: '{',\n    [tt.CBRACES]: '}',\n    [tt.OPAREN]: '(',\n    [tt.CPAREN]: ')',\n    [tt.OSQUARE]: '[',\n    [tt.CSQUARE]: ']',\n    [tt.ASSIGN]: '=',\n    [tt.ADD]: '+',\n    [tt.SUB]: '-',\n    [tt.MUL]: '*',\n    [tt.DIV]: '/',\n    [tt.POW]: '^',\n    [tt.MOD]: '%',\n    [tt.EQUALS]: '==',\n    [tt.NOTEQUALS]: '!=',\n    [tt.NOT]: '!',\n    [tt.GT]: '>',\n    [tt.LT]: '<',\n    [tt.GTE]: '>=',\n    [tt.LTE]: '<=',\n    [tt.AND]: '&&',\n    [tt.OR]: '||',\n    [tt.COLON]: ':',\n    [tt.DOT]: '.',\n    [tt.EOF]: 'End of File',\n    [tt.APMERSAND]: '&',\n    [tt.PIPE]: '|',\n    [tt.BITWISE_NOT]: '~',\n    [tt.QM]: '?',\n};\nexport const singleCharTokens = {\n    '*': tt.MUL,\n    '/': tt.DIV,\n    '+': tt.ADD,\n    '-': tt.SUB,\n    '(': tt.OPAREN,\n    ')': tt.CPAREN,\n    '^': tt.POW,\n    '%': tt.MOD,\n    '{': tt.OBRACES,\n    '}': tt.CBRACES,\n    ',': tt.COMMA,\n    '[': tt.OSQUARE,\n    ']': tt.CSQUARE,\n    ';': tt.ENDSTATEMENT,\n    ':': tt.COLON,\n    '.': tt.DOT,\n    '=': tt.ASSIGN,\n    '>': tt.GT,\n    '<': tt.LT,\n    '!': tt.NOT,\n    '|': tt.PIPE,\n    '&': tt.APMERSAND,\n    '~': tt.BITWISE_NOT,\n    '?': tt.QM\n};\nexport const doubleCharTokens = {\n    '==': tt.EQUALS,\n    '!=': tt.NOTEQUALS,\n    '>=': tt.GTE,\n    '<=': tt.LTE,\n    '+=': tt.ASSIGN,\n    '-=': tt.ASSIGN,\n    '*=': tt.ASSIGN,\n    '/=': tt.ASSIGN,\n    '&&': tt.AND,\n    '||': tt.OR\n};\nexport const tripleCharTokens = {};\nexport const primitiveMethods = [\n    '__add__',\n    '__subtract__',\n    '__multiply__',\n    '__divide__',\n    '__pow__',\n    '__eq__',\n    '__gt__',\n    '__lt__',\n    '__and__',\n    '__or__',\n    '__pipe__',\n    '__ampersand__',\n    '__bool__',\n    '__set_property__',\n    '__get_property__',\n    '__call__',\n];\nexport const types = {};\n","import { InvalidOperationError, TypeError } from '../../errors';\nimport { Position } from '../../position';\nimport { ESBoolean } from './esboolean';\nimport { str } from '../../util/util';\nimport { strip } from './wrapStrip';\nimport { types } from \"../../constants\";\nexport class ESPrimitive {\n    constructor(value, type = types.any) {\n        this.self = this;\n        this.isa = (props, type) => {\n            return type.type_check(props, this);\n        };\n        this.is = (props, obj) => {\n            return new ESBoolean(obj === this);\n        };\n        this.valueOf = () => this.__value__;\n        this.typeName = () => str(this.__type__);\n        this.has_property = (props, key) => new ESBoolean(this.hasOwnProperty(str(key)));\n        this.describe = (props, info) => {\n            if (this.info.isBuiltIn) {\n                return;\n            }\n            this.info.description = str(info);\n        };\n        this.detail = (props, info) => {\n            if (this.info.isBuiltIn) {\n                return;\n            }\n            const res = strip(info, props);\n            if (typeof res !== 'object') {\n                return new TypeError(Position.void, 'object', this.typeName(), str(this));\n            }\n            this.info = Object.assign(Object.assign({}, this.info), res);\n            this.info.isBuiltIn = false;\n        };\n        this.__type__ = type || this;\n        this.__value__ = value;\n        this.info = {};\n    }\n    __add__(props, n) {\n        return new InvalidOperationError('', this);\n    }\n    __subtract__(props, n) {\n        return new InvalidOperationError('', this);\n    }\n    __multiply__(props, n) {\n        return new InvalidOperationError('', this);\n    }\n    __divide__(props, n) {\n        return new InvalidOperationError('', this);\n    }\n    __pow__(props, n) {\n        return new InvalidOperationError('__pow__', this);\n    }\n    __mod__(props, n) {\n        return new InvalidOperationError('__mod__', this);\n    }\n    __eq__(props, n) {\n        return new InvalidOperationError('__eq__', this);\n    }\n    __gt__(props, n) {\n        return new InvalidOperationError('__gt__', this);\n    }\n    __lt__(props, n) {\n        return new InvalidOperationError('__lt__', this);\n    }\n    __and__(props, n) {\n        return new InvalidOperationError('__and__', this);\n    }\n    __or__(props, n) {\n        return new InvalidOperationError('__or__', this);\n    }\n    __bool__(props) {\n        return new InvalidOperationError('__bool__', this);\n    }\n    __pipe__(props, n) {\n        return new InvalidOperationError('__pipe__', this);\n    }\n    __ampersand__(props, n) {\n        return new InvalidOperationError('__ampersand__', this);\n    }\n    __set_property__(props, key, value) {\n        return new InvalidOperationError('__set_property__', this, `[${str(key)}] = ${str(value)}`);\n    }\n    __call__(props, ...parameters) {\n        return new InvalidOperationError('__call__', this);\n    }\n}\n","import { ESPrimitive } from './esprimitive';\nimport { ESError, IndexError } from '../../errors';\nimport { Position } from '../../position';\nimport { ESBoolean } from './esboolean';\nimport { ESString } from './esstring';\nimport { wrap } from \"./wrapStrip\";\nimport { str } from \"../../util/util\";\nimport { ESArray } from \"./esarray\";\nimport { types } from \"../../constants\";\nimport { ESTypeIntersection, ESTypeUnion } from \"./estype\";\nexport class ESErrorPrimitive extends ESPrimitive {\n    constructor(error = new ESError(Position.void, 'Unknown', 'Error not specified')) {\n        super(error, types.error);\n        this.__get_property__ = (props, key) => {\n            switch (str(key)) {\n                case 'name':\n                    return new ESString(this.valueOf().name);\n                case 'details':\n                    return new ESString(this.valueOf().details);\n                case 'traceback':\n                    return new ESArray(this.valueOf().traceback\n                        .map(s => new ESString(`${s.position.str} : ${s.line}`)));\n                default:\n                    if (this.self.hasOwnProperty(str(key))) {\n                        return wrap(this.self[str(key)], true);\n                    }\n                    return new IndexError(Position.void, key.valueOf(), this);\n            }\n        };\n        this.cast = () => new ESError(Position.void, 'TypeError', `Cannot cast type 'error'`);\n        this.str = () => new ESString(`<Error: ${this.valueOf().str}>`);\n        this.__eq__ = (props, n) => {\n            return new ESBoolean(n instanceof ESErrorPrimitive &&\n                this.valueOf().constructor === n.valueOf().constructor);\n        };\n        this.__bool__ = () => new ESBoolean(true);\n        this.bool = this.__bool__;\n        this.clone = () => new ESErrorPrimitive(this.valueOf());\n        this.type_check = this.__eq__;\n    }\n    __pipe__(props, n) {\n        return new ESTypeUnion(this, n);\n    }\n    __ampersand__(props, n) {\n        return new ESTypeIntersection(this, n);\n    }\n}\n","import { ESError, IndexError } from '../../errors';\nimport { Position } from '../../position';\nimport { ESArray } from './esarray';\nimport { ESBoolean } from './esboolean';\nimport { ESErrorPrimitive } from './eserrorprimitive';\nimport { ESFunction } from './esfunction';\nimport { ESNumber } from './esnumber';\nimport { ESObject } from './esobject';\nimport { ESString } from './esstring';\nimport { ESType, ESTypeIntersection, ESTypeUnion } from './estype';\nimport { ESPrimitive } from './esprimitive';\nimport { str } from '../../util/util';\nimport { wrap } from \"./wrapStrip\";\nimport { types } from \"../../constants\";\nexport class ESUndefined extends ESPrimitive {\n    constructor() {\n        super(undefined, types.undefined);\n        this.cast = ({ context }, type) => {\n            switch (type) {\n                case types.number:\n                    return new ESNumber();\n                case types.string:\n                    return new ESString();\n                case types.array:\n                    return new ESArray();\n                case types.undefined:\n                    return new ESUndefined();\n                case types.type:\n                    return new ESType();\n                case types.error:\n                    return new ESErrorPrimitive();\n                case types.object:\n                case types.any:\n                    return new ESObject();\n                case types.function:\n                    return new ESFunction(() => { });\n                case types.boolean:\n                    return new ESBoolean();\n                default:\n                    if (!(type instanceof ESType)) {\n                        return new ESError(Position.void, 'TypeError', `Cannot cast to type '${str(type.typeName())}'`);\n                    }\n                    return type.__call__({ context });\n            }\n        };\n        this.str = () => new ESString('<Undefined>');\n        this.__eq__ = (props, n) => {\n            return new ESBoolean(n instanceof ESUndefined ||\n                typeof n === 'undefined' ||\n                typeof n.valueOf() === 'undefined');\n        };\n        this.__bool__ = () => new ESBoolean();\n        this.bool = this.__bool__;\n        this.clone = () => new ESUndefined();\n        this.__get_property__ = ({}, key) => {\n            if (this.self.hasOwnProperty(str(key))) {\n                return wrap(this.self[str(key)], true);\n            }\n            return new IndexError(Position.void, key.valueOf(), this);\n        };\n        this.type_check = this.__eq__;\n        this.info = {\n            name: 'undefined',\n            description: 'Not defined, not a value.',\n            file: 'built-in',\n            isBuiltIn: true\n        };\n    }\n    __pipe__(props, n) {\n        return new ESTypeUnion(this, n);\n    }\n    __ampersand__(props, n) {\n        return new ESTypeIntersection(this, n);\n    }\n}\n","import { ESError, TypeError } from '../../errors';\nimport { Position } from '../../position';\nimport { str } from '../../util/util';\nimport { ESArray } from './esarray';\nimport { ESBoolean } from './esboolean';\nimport { ESNumber } from './esnumber';\nimport { ESString } from './esstring';\nimport { ESPrimitive } from './esprimitive';\nimport { ESUndefined } from './esundefined';\nimport { strip, wrap } from './wrapStrip';\nimport { types } from \"../../constants\";\nimport { ESTypeIntersection, ESTypeUnion } from \"./estype\";\nexport class ESObject extends ESPrimitive {\n    constructor(val = {}) {\n        super(val, types.object);\n        this.cast = ({}, type) => {\n            switch (type) {\n                case types.number:\n                    return new ESNumber(this.valueOf() ? 1 : 0);\n                default:\n                    return new ESError(Position.void, 'TypeError', `Cannot cast boolean to type '${str(type.typeName())}'`);\n            }\n        };\n        this.str = () => {\n            let val = str(this.valueOf());\n            if (val[val.length - 1] === '\\n') {\n                val = val.substr(0, val.length - 1);\n            }\n            return new ESString(`<ESObject ${val}>`);\n        };\n        this.__eq__ = ({ context }, n) => {\n            if (!(n instanceof ESObject)) {\n                return new ESBoolean();\n            }\n            if (n.keys.length !== this.keys.length) {\n                return new ESBoolean();\n            }\n            for (let k of this.keys) {\n                const key = k.valueOf();\n                const thisElement = this.valueOf()[key];\n                const nElement = n.valueOf()[key];\n                if (!thisElement) {\n                    if (nElement) {\n                        return new ESBoolean();\n                    }\n                    continue;\n                }\n                if (!thisElement.__eq__) {\n                    return new ESBoolean();\n                }\n                const res = thisElement.__eq__({ context }, nElement);\n                if (res instanceof ESError) {\n                    return res;\n                }\n                if (!res.valueOf()) {\n                    return new ESBoolean();\n                }\n            }\n            return new ESBoolean(true);\n        };\n        this.__bool__ = () => new ESBoolean(true);\n        this.bool = this.__bool__;\n        this.__add__ = ({ context }, n) => {\n            if (!(n instanceof ESObject)) {\n                return new TypeError(Position.void, 'object', n.typeName().valueOf(), n);\n            }\n            let newOb = {};\n            for (let k of this.keys) {\n                const key = k.valueOf();\n                const res = this.__get_property__({ context }, k);\n                if (res instanceof ESError) {\n                    return res;\n                }\n                newOb[key] = res;\n            }\n            for (let k of n.keys) {\n                const key = k.valueOf();\n                if (newOb.hasOwnProperty(key)) {\n                    continue;\n                }\n                const res = n.__get_property__({ context }, k);\n                if (res instanceof ESError) {\n                    return res;\n                }\n                newOb[key] = res;\n            }\n            return new ESObject(newOb);\n        };\n        this.__subtract__ = (props, n) => {\n            let keysToRemove = [];\n            if (n instanceof ESString) {\n                keysToRemove = [str(n)];\n            }\n            else if (n instanceof ESArray) {\n                keysToRemove = strip(n, props);\n            }\n            else {\n                return new TypeError(Position.void, 'array | string', n.typeName().valueOf(), n);\n            }\n            if (!Array.isArray(keysToRemove)) {\n                return new TypeError(Position.void, 'array | string', n.typeName().valueOf(), n);\n            }\n            let newOb = {};\n            for (let k of this.keys) {\n                const key = k.valueOf();\n                if (keysToRemove.indexOf(key) === -1) {\n                    let res = this.__get_property__(props, k);\n                    if (res instanceof ESError) {\n                        return res;\n                    }\n                    newOb[key] = res;\n                }\n            }\n            return new ESObject(newOb);\n        };\n        this.__get_property__ = (props, k) => {\n            if (!(k instanceof ESString) && !(k instanceof ESNumber)) {\n                return new TypeError(Position.void, 'string | number', k.typeName(), str(k));\n            }\n            const key = k.valueOf();\n            if (this.valueOf().hasOwnProperty(key)) {\n                return this.valueOf()[key];\n            }\n            if (this.self.hasOwnProperty(key)) {\n                return wrap(this.self[str(key)], true);\n            }\n            return new ESUndefined();\n        };\n        this.__set_property__ = ({}, key, value) => {\n            if (!(key instanceof ESString)) {\n                return new TypeError(Position.void, 'string', key.typeName(), str(key));\n            }\n            this.__value__[key.valueOf()] = value;\n        };\n        this.has_property = (props, k) => {\n            const key = str(k);\n            if (this.valueOf().hasOwnProperty(str(key))) {\n                return new ESBoolean(true);\n            }\n            return new ESBoolean(this.hasOwnProperty(key));\n        };\n        this.clone = () => {\n            const res = new ESObject();\n            let obj = {};\n            let toClone = this.valueOf();\n            for (let key of Object.keys(toClone)) {\n                obj[key] = toClone[key];\n            }\n            res.__value__ = obj;\n            return res;\n        };\n        this.type_check = (props, n) => {\n            if (!(n instanceof ESObject)) {\n                return new ESBoolean();\n            }\n            if (Object.keys(this.valueOf()).length !== Object.keys(n.valueOf()).length) {\n                return new ESBoolean();\n            }\n            for (let key of Object.keys(this.valueOf())) {\n                if (!n.valueOf().hasOwnProperty(key) || !this.valueOf().hasOwnProperty(key)) {\n                    return new ESBoolean();\n                }\n                const thisType = this.valueOf()[key];\n                const nValue = n.valueOf()[key];\n                if (!thisType.type_check(props, nValue).valueOf()) {\n                    return new ESBoolean();\n                }\n            }\n            return new ESBoolean(true);\n        };\n    }\n    get keys() {\n        return Object.keys(this.valueOf()).map(s => new ESString(s));\n    }\n    set keys(val) { }\n    __pipe__(props, n) {\n        return new ESTypeUnion(this, n);\n    }\n    __ampersand__(props, n) {\n        return new ESTypeIntersection(this, n);\n    }\n}\n","import { ESPrimitive } from './esprimitive';\nimport { global, types } from '../../constants';\nimport { ESError, IndexError } from '../../errors';\nimport { Position } from '../../position';\nimport { Context } from '../context';\nimport { call } from '../functionCaller';\nimport { str } from '../../util/util';\nimport { ESBoolean } from './esboolean';\nimport { ESObject } from './esobject';\nimport { ESString } from './esstring';\nimport { wrap } from \"./wrapStrip\";\nimport { ESTypeIntersection, ESTypeUnion } from \"./estype\";\nexport class ESFunction extends ESPrimitive {\n    constructor(func = (() => { }), arguments_ = [], name = '(anon)', this_ = new ESObject(), returnType = types.any, closure, takeCallContextAsClosure = false) {\n        super(func, types.function);\n        this.cast = (props, type) => {\n            return new ESError(Position.void, 'TypeError', `Cannot cast type 'function'`);\n        };\n        this.clone = () => {\n            return new ESFunction(this.__value__, this.arguments_, this.name, this.this_, this.returnType, this.__closure__);\n        };\n        this.valueOf = () => this;\n        this.str = () => new ESString(`<Func: ${this.name}>`);\n        this.__eq__ = (props, n) => {\n            if (!(n instanceof ESFunction))\n                return new ESBoolean(false);\n            return new ESBoolean(this.__value__ === n.__value__);\n        };\n        this.__bool__ = () => new ESBoolean(true);\n        this.bool = this.__bool__;\n        this.__call__ = ({ context }, ...params) => {\n            let ctx = context;\n            if (!this.takeCallContextAsClosure) {\n                ctx = this.__closure__;\n                ctx.path = context.path;\n            }\n            return call(ctx, this, params);\n        };\n        this.__get_property__ = (props, key) => {\n            if (this.self.hasOwnProperty(str(key))) {\n                return wrap(this.self[str(key)], true);\n            }\n            return new IndexError(Position.void, key.valueOf(), this);\n        };\n        this.type_check = (props, n) => {\n            if (!(n instanceof ESFunction)) {\n                return new ESBoolean();\n            }\n            if (this.arguments_.length !== n.arguments_.length) {\n                return new ESBoolean();\n            }\n            for (let i = 0; i < this.arguments_.length; i++) {\n                if (!this.arguments_[i].type.type_check(props, n.arguments_[i].type).valueOf()) {\n                    return new ESBoolean();\n                }\n            }\n            const thisReturnVal = this.__call__(props);\n            if (thisReturnVal instanceof ESError) {\n                return thisReturnVal;\n            }\n            if (!thisReturnVal.__eq__(props, n.returnType).valueOf()) {\n                return new ESBoolean();\n            }\n            return new ESBoolean(true);\n        };\n        this.arguments_ = arguments_;\n        this.info.name = name;\n        this.this_ = this_;\n        this.returnType = returnType;\n        if (closure) {\n            this.__closure__ = closure;\n        }\n        else {\n            this.__closure__ = new Context();\n            this.__closure__.parent = global;\n        }\n        this.takeCallContextAsClosure = takeCallContextAsClosure;\n        this.info.returnType = str(returnType);\n        this.info.args = arguments_.map(arg => ({\n            name: arg.name,\n            defaultValue: str(arg.defaultValue),\n            type: arg.type.info.name,\n            required: true\n        }));\n    }\n    get name() {\n        var _a;\n        return (_a = this.info.name) !== null && _a !== void 0 ? _a : '(anonymous)';\n    }\n    set name(v) {\n        this.info.name = v;\n    }\n    __pipe__(props, n) {\n        return new ESTypeUnion(this, n);\n    }\n    __ampersand__(props, n) {\n        return new ESTypeIntersection(this, n);\n    }\n}\n","import { str } from '../util/util';\nimport { Node } from \"./nodes\";\nimport { generateESFunctionCallContext } from \"./context\";\nimport { ESError, TypeError } from \"../errors\";\nimport { Position } from \"../position\";\nimport { ESObject, ESPrimitive, ESUndefined } from \"./primitiveTypes\";\nfunction callNode(self, context, params, fn) {\n    var _a, _b;\n    const res = fn.interpret(context);\n    if (res.error)\n        return res.error;\n    if (res.funcReturn !== undefined) {\n        res.val = res.funcReturn;\n        res.funcReturn = undefined;\n    }\n    if (self.returnType.type_check({ context }, res.val).valueOf() === false) {\n        return new TypeError(Position.void, str(self.returnType), ((_a = res.val) === null || _a === void 0 ? void 0 : _a.typeName().valueOf()) || 'undefined', (_b = res.val) === null || _b === void 0 ? void 0 : _b.str().valueOf(), '(from function return)');\n    }\n    if (res.val) {\n        return res.val;\n    }\n    else {\n        return new ESUndefined();\n    }\n}\nfunction callNative(self, context, params, fn) {\n    for (let i = params.length; i < fn.length; i++)\n        params.push(new ESUndefined());\n    const res = fn({\n        context\n    }, ...params);\n    if (res instanceof ESError || res instanceof ESPrimitive) {\n        return res;\n    }\n    return new ESUndefined();\n}\nexport function call(context, self, params) {\n    var _a;\n    let callContext = context;\n    if (!self.takeCallContextAsClosure) {\n        context = self.__closure__;\n    }\n    context.path = callContext.path;\n    const fn = self.__value__;\n    const newContext = generateESFunctionCallContext(params, self, context);\n    if (newContext instanceof ESError) {\n        return newContext;\n    }\n    let this_ = (_a = self.this_) !== null && _a !== void 0 ? _a : new ESObject();\n    if (!(this_ instanceof ESObject)) {\n        return new TypeError(Position.void, 'object', typeof this_, this_, '\\'this\\' must be an object');\n    }\n    let setRes = newContext.setOwn('this', this_);\n    if (setRes instanceof ESError) {\n        return setRes;\n    }\n    if (fn instanceof Node) {\n        return callNode(self, newContext, params, fn);\n    }\n    else if (typeof fn === 'function') {\n        return callNative(self, newContext, params, fn);\n    }\n    else {\n        return new TypeError(Position.void, 'function', typeof fn);\n    }\n}\n","import { initialise } from \"../init\";\nimport { ESError, TypeError } from \"../errors\";\nimport { Position } from \"../position\";\nimport { wrap } from './primitives/wrapStrip';\nimport { ESArray, ESPrimitive, ESUndefined } from \"./primitiveTypes\";\nimport { str } from \"../util/util\";\nimport { ESSymbol } from './symbol';\nimport chalk from \"../util/colours\";\nimport { types } from \"../constants\";\nimport { defaultPermissions } from \"../config\";\nexport class Context {\n    constructor() {\n        this.symbolTable = {};\n        this.initialisedAsGlobal = false;\n        this.deleted = false;\n        this.path_ = '';\n    }\n    get path() {\n        if (this.path_ || !this.parent) {\n            return this.path_;\n        }\n        return this.parent.path;\n    }\n    set path(val) {\n        this.path_ = val;\n    }\n    get parent() {\n        return this.parent_;\n    }\n    set parent(val) {\n        if (val == this) {\n            console.error(chalk.red(`Setting context parent to self`));\n            return;\n        }\n        this.parent_ = val;\n    }\n    get permissions() {\n        if (this.permissions_) {\n            return this.permissions_;\n        }\n        if (this.parent) {\n            return this.parent.permissions;\n        }\n        return defaultPermissions();\n    }\n    set permissions(val) {\n        this.permissions_ = val;\n    }\n    has(identifier) {\n        if (!identifier)\n            return false;\n        return this.get(identifier) !== undefined;\n    }\n    hasOwn(identifier) {\n        return this.symbolTable[identifier] instanceof ESSymbol;\n    }\n    get(identifier) {\n        let symbol = this.getSymbol(identifier);\n        if (symbol instanceof ESError || symbol == undefined) {\n            return symbol;\n        }\n        return symbol.value;\n    }\n    getRawSymbolTableAsDict() {\n        const symbols = {};\n        for (let key in this.symbolTable)\n            symbols[key] = this.symbolTable[key].value;\n        return symbols;\n    }\n    getSymbolTableAsDict() {\n        const symbols = {};\n        for (let key in this.symbolTable)\n            symbols[key] = this.symbolTable[key];\n        return symbols;\n    }\n    getSymbol(identifier) {\n        let symbol = this.symbolTable[identifier];\n        if (symbol && !symbol.isAccessible) {\n            return new TypeError(Position.void, 'assessable', 'inaccessible', symbol.identifier);\n        }\n        if (!symbol && this.parent) {\n            let res = this.parent.getSymbol(identifier);\n            if (res instanceof ESError) {\n                return res;\n            }\n            symbol = res;\n        }\n        return symbol;\n    }\n    set(identifier, value, options = {}) {\n        let context = this;\n        if (options.global) {\n            context = this.root;\n        }\n        else {\n            while (!context.hasOwn(identifier) && context.parent !== undefined) {\n                context = context.parent;\n            }\n            if (!context.hasOwn(identifier)) {\n                context = this;\n            }\n        }\n        return context.setOwn(identifier, value, options);\n    }\n    setOwn(identifier, value, options = {}) {\n        if (!(value instanceof ESPrimitive)) {\n            value = wrap(value);\n        }\n        if (options.global && !this.initialisedAsGlobal) {\n            options.global = false;\n        }\n        if (!options.forceThroughConst) {\n            let symbol = this.symbolTable[identifier];\n            if (symbol === null || symbol === void 0 ? void 0 : symbol.isConstant)\n                return new TypeError(Position.void, 'dynamic', 'constant', identifier);\n        }\n        this.symbolTable[identifier] = new ESSymbol(value, identifier, options);\n    }\n    remove(identifier) {\n        delete this.symbolTable[identifier];\n    }\n    clear() {\n        for (let symbol in this.symbolTable) {\n            this.remove(symbol);\n        }\n        this.parent = undefined;\n        this.deleted = true;\n    }\n    get root() {\n        let parent = this;\n        while (parent.parent) {\n            parent = parent.parent;\n        }\n        return parent;\n    }\n    get keys() {\n        return Object.keys(this.symbolTable);\n    }\n    resetAsGlobal() {\n        var _a, _b;\n        if (!this.initialisedAsGlobal)\n            return;\n        const printFunc = this.root.get('print');\n        const inputFunc = this.root.get('input');\n        if (!(printFunc instanceof ESPrimitive) || !(inputFunc instanceof ESPrimitive)) {\n            console.error('Error with print and input functions.');\n            return;\n        }\n        this.symbolTable = {};\n        this.initialisedAsGlobal = false;\n        initialise(this, ((_a = printFunc.valueOf()) === null || _a === void 0 ? void 0 : _a.func) || console.log, ((_b = inputFunc.valueOf()) === null || _b === void 0 ? void 0 : _b.func) || (() => { }));\n    }\n    clone() {\n        const newContext = new Context();\n        newContext.parent = this.parent;\n        newContext.deleted = this.deleted;\n        newContext.initialisedAsGlobal = this.initialisedAsGlobal;\n        newContext.symbolTable = Object.assign(Object.assign({}, newContext.symbolTable), this.symbolTable);\n        return newContext;\n    }\n    deepClone() {\n        var _a;\n        let clone = this.clone();\n        clone.parent = (_a = clone.parent) === null || _a === void 0 ? void 0 : _a.deepClone();\n        return clone;\n    }\n    log() {\n        console.log('---- CONTEXT ----');\n        for (let key in this.symbolTable) {\n            const symbol = this.symbolTable[key];\n            let out = key;\n            if (symbol.isConstant)\n                out += ' (CONST)';\n            if (!symbol.isAccessible)\n                out += ' (INACCESSIBLE)';\n            out += ': ';\n            out += str(this.symbolTable[key].value);\n            console.log(out);\n        }\n        console.log('-----------------');\n    }\n}\nexport function generateESFunctionCallContext(params, self, parent) {\n    const newContext = new Context();\n    newContext.parent = parent;\n    let max = Math.max(params.length, self.arguments_.length);\n    for (let i = 0; i < max; i++) {\n        let value = new ESUndefined();\n        let type = types.any;\n        if (!self.arguments_[i]) {\n            continue;\n        }\n        const arg = self.arguments_[i];\n        if (params[i] instanceof ESPrimitive) {\n            type = params[i].__type__;\n            value = params[i];\n        }\n        const typeIncludes = arg.type.type_check({ context: parent }, params[i]);\n        if (typeIncludes instanceof ESError)\n            return typeIncludes;\n        if (!typeIncludes.valueOf()) {\n            return new TypeError(Position.void, str(arg.type), str(type), str(value));\n        }\n        newContext.setOwn(arg.name, value, {\n            forceThroughConst: true\n        });\n    }\n    let setRes = newContext.setOwn('args', new ESArray(params), {\n        forceThroughConst: true\n    });\n    if (setRes instanceof ESError) {\n        return setRes;\n    }\n    return newContext;\n}\n","import { ESError, IndexError, TypeError } from '../../errors';\nimport { Position } from '../../position';\nimport { ESBoolean } from './esboolean';\nimport { ESString } from './esstring';\nimport { ESPrimitive } from './esprimitive';\nimport { str } from '../../util/util';\nimport { wrap } from './wrapStrip';\nimport { types } from \"../../constants\";\nimport { ESTypeIntersection, ESTypeUnion } from \"./estype\";\nexport class ESNamespace extends ESPrimitive {\n    constructor(name, value, mutable = false) {\n        super(value, types.object);\n        this.cast = (props) => {\n            return new ESError(Position.void, 'TypeError', `Cannot cast type 'namespace'`);\n        };\n        this.clone = () => {\n            let obj = {};\n            let toClone = this.valueOf();\n            for (let key of Object.keys(toClone)) {\n                obj[key] = toClone[key];\n            }\n            return new ESNamespace(this.name, obj);\n        };\n        this.str = () => {\n            const keys = Object.keys(this.valueOf());\n            return new ESString(`<Namespace ${str(this.name)}${keys.length > 0 ? ': ' : ''}${keys.slice(0, 5)}${keys.length >= 5 ? '...' : ''}>`);\n        };\n        this.__eq__ = (props, n) => {\n            return new ESBoolean(this === n);\n        };\n        this.__bool__ = () => new ESBoolean(true);\n        this.bool = this.__bool__;\n        this.__get_property__ = (props, key) => {\n            if (key instanceof ESString && this.valueOf().hasOwnProperty(key.valueOf())) {\n                const symbol = this.valueOf()[key.valueOf()];\n                if (symbol.isAccessible) {\n                    return symbol.value;\n                }\n            }\n            if (!(key instanceof ESString)) {\n                return new TypeError(Position.void, 'string', key.typeName());\n            }\n            if (this.self.hasOwnProperty(str(key))) {\n                return wrap(this.self[str(key)], true);\n            }\n            return new IndexError(Position.void, key.valueOf(), this.self);\n        };\n        this.type_check = this.__eq__;\n        this.info.name = str(name);\n        this.mutable = mutable;\n    }\n    get name() {\n        return new ESString(this.info.name);\n    }\n    set name(v) {\n        this.info.name = v.valueOf();\n    }\n    __set_property__(props, key, value) {\n        if (!(key instanceof ESString)) {\n            return new TypeError(Position.void, 'string', key.typeName().valueOf(), str(key));\n        }\n        let idx = str(key);\n        if (!this.mutable) {\n            return new TypeError(Position.void, 'mutable', 'immutable', `${str(this.name)}`);\n        }\n        if (!(value instanceof ESPrimitive)) {\n            value = wrap(value);\n        }\n        const symbol = this.__value__[idx];\n        if (!symbol) {\n            return new ESError(Position.void, 'SymbolError', `Symbol ${idx} is not declared in namespace ${str(this.name)}.`);\n        }\n        if (symbol.isConstant) {\n            return new TypeError(Position.void, 'mutable', 'immutable', `${str(this.name)}[${idx}]`);\n        }\n        if (!symbol.isAccessible) {\n            return new TypeError(Position.void, 'accessible', 'inaccessible', `${str(this.name)}[${idx}]`);\n        }\n        symbol.value = value;\n    }\n    __pipe__(props, n) {\n        return new ESTypeUnion(this, n);\n    }\n    __ampersand__(props, n) {\n        return new ESTypeIntersection(this, n);\n    }\n}\n","import { ESError, IndexError, TypeError } from '../../errors';\nimport { Position } from '../../position';\nimport { ESBoolean } from './esboolean';\nimport { ESString } from './esstring';\nimport { ESPrimitive } from './esprimitive';\nimport { str } from '../../util/util';\nimport { strip, wrap } from './wrapStrip';\nimport { ESFunction } from \"./esfunction\";\nimport { types } from \"../../constants\";\nimport { ESTypeIntersection, ESTypeUnion } from \"./estype\";\nfunction callBack(fTakesProps, val, key, props, args) {\n    let res;\n    if (fTakesProps) {\n        try {\n            res = new val[key](props, ...args);\n        }\n        catch (_a) {\n            try {\n                res = val[key](props, ...args);\n            }\n            catch (e) {\n                return new ESError(Position.void, e.name, e.toString());\n            }\n        }\n    }\n    else {\n        try {\n            res = new val[key](...args.map(o => strip(o, props)));\n        }\n        catch (_b) {\n            try {\n                res = val[key](...args.map(o => strip(o, props)));\n            }\n            catch (e) {\n                return new ESError(Position.void, e.name, e.toString());\n            }\n        }\n    }\n    return wrap(res);\n}\nexport class ESJSBinding extends ESPrimitive {\n    constructor(value, name = '<AnonNative>', functionsTakeProps = false) {\n        super(value, types.object);\n        this.cast = (props) => {\n            return new ESError(Position.void, 'TypeError', `Cannot cast native object`);\n        };\n        this.clone = () => new ESJSBinding(this.__value__);\n        this.str = () => {\n            return new ESString(str(this.__value__));\n        };\n        this.__eq__ = ({}, n) => {\n            return new ESBoolean(this === n);\n        };\n        this.__bool__ = () => new ESBoolean(true);\n        this.bool = this.__bool__;\n        this.__get_property__ = (props, k) => {\n            const key = str(k);\n            const val = this.__value__;\n            const res = val[key];\n            if (res === undefined) {\n                if (this.self.hasOwnProperty(key)) {\n                    return wrap(this.self[str(key)], true);\n                }\n                return new IndexError(Position.void, key, this);\n            }\n            if (res instanceof ESPrimitive) {\n                return res;\n            }\n            if (typeof res === 'function') {\n                const fTakesProps = this.functionsTakeProps;\n                return new ESFunction((props, ...args) => {\n                    return callBack(fTakesProps, val, key, props, args);\n                });\n            }\n            return wrap(res);\n        };\n        this.__call__ = (props, ...args) => {\n            if (typeof this.__value__ !== 'function') {\n                return new TypeError(Position.void, 'function', typeof this.__value__, str(this));\n            }\n            return callBack(this.functionsTakeProps, this, '__value__', props, args);\n        };\n        this.has_property = (props, key) => {\n            return new ESBoolean(!(this.__get_property__(props, key) instanceof ESError));\n        };\n        this.type_check = this.__eq__;\n        this.info.name = str(name);\n        this.functionsTakeProps = functionsTakeProps;\n    }\n    __set_property__(props, k, value) {\n        const key = str(k);\n        const val = this.__value__;\n        if (this.self.hasOwnProperty(key)) {\n            this.self[str(key)] = value;\n            return;\n        }\n        val[key] = strip(value, props);\n    }\n    __pipe__(props, n) {\n        return new ESTypeUnion(this, n);\n    }\n    __ampersand__(props, n) {\n        return new ESTypeIntersection(this, n);\n    }\n}\n","import { ESPrimitive } from './primitives/esprimitive';\nimport { ESArray } from './primitives/esarray';\nimport { ESBoolean } from './primitives/esboolean';\nimport { ESErrorPrimitive } from './primitives/eserrorprimitive';\nimport { ESFunction } from './primitives/esfunction';\nimport { ESNumber } from './primitives/esnumber';\nimport { ESObject } from './primitives/esobject';\nimport { ESString } from './primitives/esstring';\nimport { ESType } from './primitives/estype';\nimport { ESUndefined } from './primitives/esundefined';\nimport { ESNamespace } from './primitives/esnamespace';\nimport { ESJSBinding } from \"./primitives/esjsbinding\";\nimport { types } from \"../constants\";\nexport { ESArray, ESBoolean, ESErrorPrimitive, ESFunction, ESNumber, ESPrimitive, ESString, ESObject, ESType, ESUndefined, ESNamespace, ESJSBinding };\nexport function initPrimitiveTypes() {\n    types.type = new ESType(true, 'Type');\n    types.undefined = new ESType(true, 'Undefined');\n    types.string = new ESType(true, 'String');\n    types.array = new ESType(true, 'Array');\n    types.number = new ESType(true, 'Number');\n    types.any = new ESType(true, 'Any');\n    types.function = new ESType(true, 'Function');\n    types.bool = new ESType(true, 'Boolean');\n    types.object = new ESType(true, 'Object');\n    types.error = new ESType(true, 'Error');\n    types.any.info = {\n        name: 'any',\n        description: 'Matches any other type',\n        file: 'built-in',\n        isBuiltIn: true\n    };\n    types.number.info = {\n        name: 'any',\n        description: 'The ES Number type. Is a a double-precision 64-bit binary format IEEE 754 value, like double in Java and C#',\n        file: 'built-in',\n        isBuiltIn: true\n    };\n    types.string.info = {\n        name: 'string',\n        description: 'The ES String type. Holds an array of characters, and can be defined with any of \\', \" and `. Can be indexed like an array.',\n        file: 'built-in',\n        isBuiltIn: true\n    };\n    types.bool.info = {\n        name: 'bool',\n        description: 'The ES Bool type. Exactly two instances exist, true and false.',\n        file: 'built-in',\n        isBuiltIn: true\n    };\n    types.function.info = {\n        name: 'function',\n        description: 'The ES Function type. Is a block of code which executes when called and takes in 0+ parameters.',\n        file: 'built-in',\n        isBuiltIn: true\n    };\n    types.array.info = {\n        name: 'array',\n        description: 'The ES Array type. Defines a set of items of any type which can be accessed by an index with [].',\n        file: 'built-in',\n        isBuiltIn: true\n    };\n    types.object.info = {\n        name: 'object',\n        description: 'The ES Object type. Similar to JS objects or python dictionaries.',\n        file: 'built-in',\n        isBuiltIn: true\n    };\n    types.error.info = {\n        name: 'error',\n        description: 'The ES Error type. Call to throw an error.',\n        file: 'built-in',\n        isBuiltIn: true\n    };\n    types.type.info = {\n        name: 'type',\n        description: 'The ES Type type. Call to get the type of a value at a string.',\n        file: 'built-in',\n        isBuiltIn: true\n    };\n}\n","import { primitiveMethods } from '../constants';\nimport { Context } from \"./context\";\nimport { ESError, TypeError } from \"../errors\";\nimport { Position } from \"../position\";\nimport { wrap } from './primitives/wrapStrip';\nimport { ESArray, ESBoolean, ESFunction, ESNumber, ESObject, ESString, ESType, ESUndefined } from \"./primitiveTypes\";\nfunction dealWithExtends(context, class_, instance, this_, callContext) {\n    if (!(class_ instanceof ESType)) {\n        return new TypeError(Position.void, 'Type', typeof class_, class_);\n    }\n    const superFunc = new ESFunction(({ context }, ...args) => {\n        const newContext = new Context();\n        newContext.parent = context;\n        if (class_.__extends__) {\n            let _a = dealWithExtends(newContext, class_.__extends__, instance, this_, callContext);\n            if (_a instanceof ESError) {\n                return _a;\n            }\n        }\n        const initFunc = class_ === null || class_ === void 0 ? void 0 : class_.__init__;\n        if (!initFunc) {\n            return;\n        }\n        initFunc.this_ = this_;\n        initFunc.__closure__ = newContext;\n        const res_ = initFunc.__call__({ context: newContext }, ...args);\n        if (res_ instanceof ESError) {\n            return res_;\n        }\n    }, undefined, 'super', this_);\n    let setRes = context.setOwn('super', superFunc);\n    if (setRes instanceof ESError) {\n        return setRes;\n    }\n    const res = createInstance(class_, { context }, [], false, instance);\n    if (res instanceof ESError) {\n        return res;\n    }\n}\nexport function createInstance(type, { context }, params, runInit = true, on = {}) {\n    var _b;\n    if (type.primitive) {\n        if (params.length < 1) {\n            return new ESUndefined();\n        }\n        switch (type.__name__) {\n            case 'Undefined':\n            case 'Type':\n                if (params.length < 1) {\n                    return new ESType();\n                }\n                else {\n                    return new ESString(params[0].typeName());\n                }\n            case 'String':\n                return new ESString(params[0].str().valueOf());\n            case 'Array':\n                return new ESArray(params);\n            case 'Number':\n                return new ESNumber(params[0].valueOf());\n            case 'Function':\n                return new ESFunction(params[0].valueOf());\n            case 'Boolean':\n                return new ESBoolean(params[0].bool().valueOf());\n            default:\n                return wrap(params[0]);\n        }\n    }\n    const newContext = new Context();\n    newContext.parent = (_b = type.__init__) === null || _b === void 0 ? void 0 : _b.__closure__;\n    const instance = new ESObject();\n    if (type.__extends__) {\n        let res = dealWithExtends(newContext, type.__extends__, on, instance, context);\n        if (res instanceof ESError) {\n            return res;\n        }\n    }\n    instance.__value__ = on;\n    for (let method of type.__methods__) {\n        const methodClone = method.clone();\n        methodClone.this_ = instance;\n        on[method.name] = methodClone;\n        if (primitiveMethods.indexOf(method.name) !== -1) {\n            instance[method.name] = methodClone.__call__;\n        }\n    }\n    if (runInit && type.__init__) {\n        type.__init__.this_ = instance;\n        type.__init__.__closure__ = newContext;\n        const res = type.__init__.__call__({ context: newContext }, ...params);\n        if (res instanceof ESError) {\n            return res;\n        }\n    }\n    instance.__type__ = type;\n    type.__instances__.push(instance);\n    return instance;\n}\n","import { ESPrimitive } from './esprimitive';\nimport { ESError, InvalidOperationError, TypeError } from '../../errors';\nimport { createInstance } from '../instantiator';\nimport { ESBoolean } from './esboolean';\nimport { ESString } from './esstring';\nimport { wrap } from \"./wrapStrip\";\nimport { Position } from \"../../position\";\nimport { str } from \"../../util/util\";\nimport { types } from \"../../constants\";\nimport { ESTypeArray } from \"./esarray\";\nexport class ESType extends ESPrimitive {\n    constructor(isPrimitive = false, name = '(anon)', __methods__ = [], __extends__, __init__) {\n        super(undefined, types === null || types === void 0 ? void 0 : types.type);\n        this.__instances__ = [];\n        this.clone = () => {\n            return new ESType(this.primitive, this.__name__, this.__methods__, this.__extends__, this.__init__);\n        };\n        this.isa = (props, type) => {\n            return new ESBoolean(type === types.type);\n        };\n        this.cast = (props, type) => {\n            return new InvalidOperationError('cast', this);\n        };\n        this.type_check = (props, n) => {\n            var _a;\n            if (!n)\n                return new ESBoolean();\n            let t = n.__type__;\n            if (this === types.any ||\n                t === types.any ||\n                this === t) {\n                return new ESBoolean(true);\n            }\n            while (t instanceof ESType) {\n                if (((_a = t.__extends__) === null || _a === void 0 ? void 0 : _a.__eq__(props, this).valueOf()) === true) {\n                    return new ESBoolean(true);\n                }\n                if (!t.__extends__) {\n                    break;\n                }\n                t = t.__extends__;\n            }\n            return new ESBoolean();\n        };\n        this.__eq__ = (props, t) => {\n            return new ESBoolean(t === this);\n        };\n        this.__call__ = (props, ...params) => {\n            return createInstance(this, props, params || []);\n        };\n        this.str = () => new ESString(this.__name__);\n        this.__bool__ = () => new ESBoolean(true);\n        this.bool = this.__bool__;\n        this.__get_property__ = (props, k) => {\n            if (!(k instanceof ESString)) {\n                if (this === types.array) {\n                    return new ESTypeArray(k);\n                }\n                return new TypeError(Position.void, 'string', k.typeName(), str(k));\n            }\n            const key = k.valueOf();\n            if (this.self.hasOwnProperty(key)) {\n                return wrap(this.self[key], true);\n            }\n            return new ESTypeArray(k);\n        };\n        this.primitive = isPrimitive;\n        this.__name__ = name;\n        this.info.name = name;\n        this.__extends__ = __extends__;\n        this.__methods__ = __methods__;\n        if (__init__) {\n            __init__.name = name;\n            this.__init__ = __init__;\n        }\n        if (!types.type) {\n            this.__type__ = this;\n        }\n    }\n    __pipe__(props, n) {\n        return new ESTypeUnion(this, n);\n    }\n    __ampersand__(props, n) {\n        return new ESTypeIntersection(this, n);\n    }\n}\nexport class ESTypeUnion extends ESType {\n    constructor(left, right) {\n        super(false, `(${str(left)}) | (${str(right)})`);\n        this.__call__ = (props, ...params) => {\n            return new InvalidOperationError('__call__', this);\n        };\n        this.type_check = (props, t) => {\n            const leftRes = this.__left__.type_check(props, t);\n            const rightRes = this.__right__.type_check(props, t);\n            if (leftRes instanceof ESError)\n                return leftRes;\n            if (rightRes instanceof ESError)\n                return rightRes;\n            return new ESBoolean(leftRes.valueOf() ||\n                rightRes.valueOf());\n        };\n        this.clone = () => {\n            return new ESTypeUnion(this.__left__, this.__right__);\n        };\n        this.__eq__ = (props, t) => {\n            return new ESBoolean(t instanceof ESTypeUnion &&\n                this.__left__.__eq__(props, t.__left__).valueOf() === true &&\n                this.__right__.__eq__(props, t.__right__).valueOf() === true);\n        };\n        this.__left__ = left;\n        this.__right__ = right;\n    }\n}\nexport class ESTypeIntersection extends ESType {\n    constructor(left, right) {\n        super(false, `(${str(left)}) & (${str(right)})`);\n        this.__call__ = (props, ...params) => {\n            return new InvalidOperationError('__call__', this);\n        };\n        this.type_check = (props, t) => {\n            const leftRes = this.__left__.type_check(props, t);\n            const rightRes = this.__right__.type_check(props, t);\n            if (leftRes instanceof ESError)\n                return leftRes;\n            if (rightRes instanceof ESError)\n                return rightRes;\n            return new ESBoolean(leftRes.valueOf() &&\n                rightRes.valueOf());\n        };\n        this.clone = () => {\n            return new ESTypeIntersection(this.__left__, this.__right__);\n        };\n        this.__eq__ = (props, t) => {\n            return new ESBoolean(t instanceof ESTypeIntersection &&\n                this.__left__.__eq__(props, t.__left__).valueOf() === true &&\n                this.__right__.__eq__(props, t.__right__).valueOf() === true);\n        };\n        this.__left__ = left;\n        this.__right__ = right;\n    }\n}\nexport class ESTypeNot extends ESType {\n    constructor(type) {\n        super(false, `~(${str(type)})`);\n        this.__call__ = (props, ...params) => {\n            return new InvalidOperationError('__call__', this);\n        };\n        this.type_check = (props, t) => {\n            const res = this.__val__.type_check(props, t);\n            if (res instanceof ESError)\n                return res;\n            return new ESBoolean(!res.valueOf());\n        };\n        this.clone = () => {\n            return new ESTypeNot(this.__val__);\n        };\n        this.__eq__ = (props, t) => {\n            return new ESBoolean(t instanceof ESTypeNot &&\n                this.__val__.__eq__(props, t.__val__).valueOf() === true);\n        };\n        this.__val__ = type;\n    }\n}\n","import { ESError, IndexError, TypeError } from '../../errors';\nimport { Position } from '../../position';\nimport { ESArray } from './esarray';\nimport { ESBoolean } from './esboolean';\nimport { ESString } from './esstring';\nimport { ESPrimitive } from './esprimitive';\nimport { str } from '../../util/util';\nimport { wrap } from \"./wrapStrip\";\nimport { types } from \"../../constants\";\nimport { ESTypeIntersection, ESTypeUnion } from \"./estype\";\nexport class ESNumber extends ESPrimitive {\n    constructor(value = 0) {\n        super(value, types.number);\n        this.cast = (props, type) => {\n            switch (type) {\n                case types.number:\n                    return this;\n                case types.string:\n                    return this.str();\n                case types.array:\n                    return new ESArray(new Array(this.valueOf()));\n                default:\n                    return new ESError(Position.void, 'TypeError', `Cannot cast to type '${str(type.typeName())}'`);\n            }\n        };\n        this.str = () => new ESString(this.valueOf().toString());\n        this.__add__ = (props, n) => {\n            if (!(n instanceof ESNumber))\n                return new TypeError(Position.void, 'Number', n.typeName().valueOf(), n.valueOf());\n            return new ESNumber(this.valueOf() + n.valueOf());\n        };\n        this.__subtract__ = (props, n) => {\n            if (!(n instanceof ESNumber))\n                return new TypeError(Position.void, 'Number', n.typeName().valueOf(), n.valueOf());\n            return new ESNumber(this.valueOf() - n.valueOf());\n        };\n        this.__multiply__ = (props, n) => {\n            if (!(n instanceof ESNumber))\n                return new TypeError(Position.void, 'Number', n.typeName().valueOf(), n.valueOf());\n            return new ESNumber(this.valueOf() * n.valueOf());\n        };\n        this.__divide__ = (props, n) => {\n            if (!(n instanceof ESNumber))\n                return new TypeError(Position.void, 'Number', n.typeName().valueOf(), n.valueOf());\n            return new ESNumber(this.valueOf() / n.valueOf());\n        };\n        this.__pow__ = (props, n) => {\n            if (!(n instanceof ESNumber)) {\n                return new TypeError(Position.void, 'Number', n.typeName().valueOf(), n.valueOf());\n            }\n            return new ESNumber(Math.pow(this.valueOf(), n.valueOf()));\n        };\n        this.__mod__ = (props, n) => {\n            if (!(n instanceof ESNumber)) {\n                return new TypeError(Position.void, 'Number', n.typeName().valueOf(), n.valueOf());\n            }\n            return new ESNumber(this.valueOf() % n.valueOf());\n        };\n        this.__eq__ = (props, n) => {\n            if (!(n instanceof ESNumber))\n                return new ESBoolean(false);\n            return new ESBoolean(this.valueOf() === n.valueOf());\n        };\n        this.__gt__ = (props, n) => {\n            if (!(n instanceof ESNumber))\n                return new TypeError(Position.void, 'Number', n.typeName().valueOf(), n.valueOf());\n            return new ESBoolean(this.valueOf() > n.valueOf());\n        };\n        this.__lt__ = (props, n) => {\n            if (!(n instanceof ESNumber))\n                return new TypeError(Position.void, 'Number', n.typeName().valueOf(), n.valueOf());\n            return new ESBoolean(this.valueOf() < n.valueOf());\n        };\n        this.__bool__ = () => {\n            return new ESBoolean(this.valueOf() > 0);\n        };\n        this.bool = this.__bool__;\n        this.clone = () => new ESNumber(this.valueOf());\n        this.__get_property__ = ({}, key) => {\n            if (this.self.hasOwnProperty(str(key))) {\n                return wrap(this.self[str(key)], true);\n            }\n            return new IndexError(Position.void, key.valueOf(), this);\n        };\n        this.type_check = this.__eq__;\n    }\n    __pipe__(props, n) {\n        return new ESTypeUnion(this, n);\n    }\n    __ampersand__(props, n) {\n        return new ESTypeIntersection(this, n);\n    }\n}\n","import { ESError, IndexError, TypeError } from '../../errors';\nimport { Position } from '../../position';\nimport { ESPrimitive } from './esprimitive';\nimport { str } from '../../util/util';\nimport { ESNumber } from './esnumber';\nimport { ESString } from './esstring';\nimport { wrap } from \"./wrapStrip\";\nimport { types } from \"../../constants\";\nimport { ESTypeIntersection, ESTypeUnion } from \"./estype\";\nexport class ESBoolean extends ESPrimitive {\n    constructor(val = false) {\n        super(Boolean(val), types.bool);\n        this.__get_property__ = (props, key) => {\n            if (this.self.hasOwnProperty(str(key))) {\n                return wrap(this.self[str(key)], true);\n            }\n            return new IndexError(Position.void, key.valueOf(), this);\n        };\n        this.cast = (props, type) => {\n            switch (type) {\n                case types.number:\n                    return new ESNumber(this.valueOf() ? 1 : 0);\n                default:\n                    return new ESError(Position.void, 'TypeError', `Cannot cast boolean to type '${str(type.typeName())}'`);\n            }\n        };\n        this.__eq__ = (props, n) => {\n            if (!(n instanceof ESBoolean)) {\n                return new TypeError(Position.void, 'Boolean', n.typeName().valueOf(), n.valueOf());\n            }\n            return new ESBoolean(this.valueOf() === n.valueOf());\n        };\n        this.__bool__ = () => this;\n        this.__and__ = (props, n) => new ESBoolean(this.valueOf() && n.bool().valueOf());\n        this.__or__ = (props, n) => {\n            return new ESBoolean(this.valueOf() || n.bool().valueOf());\n        };\n        this.str = () => new ESString(this.valueOf() ? 'true' : 'false');\n        this.clone = () => new ESBoolean(this.valueOf());\n        this.bool = () => this;\n        this.type_check = this.__eq__;\n        this.info = {\n            name: str(val),\n            description: `Boolean global constant which evaluates to ${str(val)}, the opposite of ${str(!val)}`,\n            file: 'built-in',\n            isBuiltIn: true,\n            helpLink: 'https://en.wikipedia.org/wiki/Boolean_expression'\n        };\n    }\n    __pipe__(props, n) {\n        return new ESTypeUnion(this, n);\n    }\n    __ampersand__(props, n) {\n        return new ESTypeIntersection(this, n);\n    }\n}\n","import { ESError, InvalidOperationError, TypeError } from '../../errors';\nimport { Position } from '../../position';\nimport { str } from '../../util/util';\nimport { ESBoolean } from './esboolean';\nimport { ESNumber } from './esnumber';\nimport { ESString } from './esstring';\nimport { ESPrimitive } from './esprimitive';\nimport { ESUndefined } from './esundefined';\nimport { wrap } from './wrapStrip';\nimport { types } from \"../../constants\";\nimport { ESType, ESTypeIntersection, ESTypeUnion } from \"./estype\";\nexport class ESArray extends ESPrimitive {\n    constructor(values = []) {\n        super(values, types.array);\n        this.len = (props) => {\n            return new ESNumber(this.valueOf().length);\n        };\n        this.cast = (props, type) => {\n            switch (type) {\n                case types.number:\n                    return new ESNumber(this.len(props).valueOf());\n                case types.boolean:\n                    return this.bool();\n                default:\n                    return new ESError(Position.void, 'TypeError', `Cannot cast boolean to type '${str(type.typeName())}'`);\n            }\n        };\n        this.str = () => new ESString(str(this.valueOf()));\n        this.__eq__ = (props, n) => {\n            if (!(n instanceof ESArray)) {\n                return new ESBoolean();\n            }\n            if (n.len(props).valueOf() !== this.len(props).valueOf()) {\n                return new ESBoolean();\n            }\n            for (let i = 0; i < this.len(props).valueOf(); i++) {\n                const thisElement = this.valueOf()[i];\n                const nElement = n.valueOf()[i];\n                if (!thisElement) {\n                    if (nElement) {\n                        return new ESBoolean();\n                    }\n                    continue;\n                }\n                if (!thisElement.__eq__) {\n                    return new ESBoolean();\n                }\n                const res = thisElement.__eq__(props, nElement);\n                if (res instanceof ESError) {\n                    return res;\n                }\n                if (!res.valueOf()) {\n                    return new ESBoolean();\n                }\n            }\n            return new ESBoolean(true);\n        };\n        this.__add__ = (props, n) => {\n            if (!(n instanceof ESArray)) {\n                return new TypeError(Position.void, 'array', n.typeName().valueOf(), n);\n            }\n            return new ESArray([...this.valueOf(), ...n.valueOf()]);\n        };\n        this.__bool__ = () => new ESBoolean(this.valueOf().length > 0);\n        this.bool = this.__bool__;\n        this.__get_property__ = (props, key) => {\n            if (key instanceof ESString && this.self.hasOwnProperty(str(key))) {\n                return wrap(this.self[str(key)], true);\n            }\n            if (!(key instanceof ESNumber)) {\n                return new ESUndefined();\n            }\n            let idx = key.valueOf();\n            while (idx < 0) {\n                idx = this.valueOf().length + idx;\n            }\n            if (idx < this.valueOf().length) {\n                return this.valueOf()[idx];\n            }\n            return new ESUndefined();\n        };\n        this.contains = (props, val) => {\n            for (let element of this.__value__) {\n                if (val.__eq__(props, element)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        this.clone = () => {\n            const newArr = [];\n            for (let element of this.valueOf()) {\n                newArr.push(element);\n            }\n            return new ESArray(newArr);\n        };\n        this.type_check = (props, n) => {\n            if (!(n instanceof ESArray) || this.len(props).valueOf() !== n.len(props).valueOf()) {\n                return new ESBoolean();\n            }\n            for (let i = 0; i < this.__value__.length; i++) {\n                const res = this.__value__[i].type_check(props, n.__value__[i]);\n                if (res instanceof ESError)\n                    return res;\n                if (!res.valueOf()) {\n                    return new ESBoolean();\n                }\n            }\n            return new ESBoolean(true);\n        };\n    }\n    __set_property__(props, key, value) {\n        if (!(key instanceof ESNumber)) {\n            return;\n        }\n        if (!(value instanceof ESPrimitive)) {\n            value = wrap(value);\n        }\n        let idx = key.valueOf();\n        while (idx < 0) {\n            idx = this.valueOf().length + idx;\n        }\n        this.__value__[idx] = value;\n    }\n    __pipe__(props, n) {\n        return new ESTypeUnion(this, n);\n    }\n    __ampersand__(props, n) {\n        return new ESTypeIntersection(this, n);\n    }\n}\nexport class ESTypeArray extends ESType {\n    constructor(type) {\n        super(false, `Array[${str(type)}]`);\n        this.__call__ = (props, ...params) => {\n            return new InvalidOperationError('__call__', this);\n        };\n        this.type_check = (props, t) => {\n            if (!(t instanceof ESArray)) {\n                return new ESBoolean();\n            }\n            for (const element of t.valueOf()) {\n                if (!this.type.type_check(props, element).valueOf()) {\n                    return new ESBoolean();\n                }\n            }\n            return new ESBoolean(true);\n        };\n        this.clone = () => {\n            return new ESTypeArray(this.type);\n        };\n        this.type = type;\n    }\n}\n","import { ESError, TypeError } from '../../errors';\nimport { Position } from '../../position';\nimport { str } from '../../util/util';\nimport { ESArray } from './esarray';\nimport { ESBoolean } from './esboolean';\nimport { ESNumber } from './esnumber';\nimport { ESPrimitive } from './esprimitive';\nimport { wrap } from './wrapStrip';\nimport { types } from \"../../constants\";\nimport { ESTypeIntersection, ESTypeUnion } from \"./estype\";\nexport class ESString extends ESPrimitive {\n    constructor(value = '') {\n        super(value, types.string);\n        this.str = () => this;\n        this.cast = (props, type) => {\n            switch (type) {\n                case types.number:\n                    const num = parseFloat(this.valueOf());\n                    if (isNaN(num)) {\n                        return new ESError(Position.void, 'TypeError', `This string is not a valid number`);\n                    }\n                    return new ESNumber(num);\n                case types.string:\n                    return this;\n                case types.array:\n                    return new ESArray(this.valueOf().split('').map(s => new ESString(s)));\n                default:\n                    return new ESError(Position.void, 'TypeError', `Cannot cast to type '${str(type.typeName())}'`);\n            }\n        };\n        this.__add__ = (props, n) => {\n            if (!(n instanceof ESString)) {\n                return new TypeError(Position.void, 'String', n.typeName().valueOf(), n.valueOf());\n            }\n            return new ESString(this.valueOf() + n.valueOf());\n        };\n        this.__multiply__ = (props, n) => {\n            if (!(n instanceof ESNumber)) {\n                return new TypeError(Position.void, 'Number', n.typeName().valueOf(), n.valueOf());\n            }\n            return new ESString(this.valueOf().repeat(n.valueOf()));\n        };\n        this.__eq__ = (props, n) => {\n            if (!(n instanceof ESString)) {\n                return new ESBoolean(false);\n            }\n            return new ESBoolean(this.valueOf() === n.valueOf());\n        };\n        this.__gt__ = (props, n) => {\n            if (!(n instanceof ESString)) {\n                return new TypeError(Position.void, 'String', n.typeName().valueOf(), n.valueOf());\n            }\n            return new ESBoolean(this.valueOf().length > n.valueOf().length);\n        };\n        this.__lt__ = (props, n) => {\n            if (!(n instanceof ESString)) {\n                return new TypeError(Position.void, 'String', n.typeName().valueOf(), n.valueOf());\n            }\n            return new ESBoolean(this.valueOf().length < n.valueOf().length);\n        };\n        this.__bool__ = () => new ESBoolean(this.valueOf().length > 0);\n        this.bool = this.__bool__;\n        this.len = () => {\n            return new ESNumber(this.valueOf().length);\n        };\n        this.clone = () => new ESString(this.valueOf());\n        this.__get_property__ = (props, key) => {\n            if (key instanceof ESString && this.self.hasOwnProperty(str(key))) {\n                return wrap(this.self[str(key)], true);\n            }\n            if (!(key instanceof ESNumber)) {\n                return new ESString();\n            }\n            let idx = key.valueOf();\n            while (idx < 0) {\n                idx = this.valueOf().length + idx;\n            }\n            if (idx < this.valueOf().length) {\n                return new ESString(this.valueOf()[idx]);\n            }\n            return new ESString();\n        };\n        this.type_check = this.__eq__;\n    }\n    __set_property__(props, key, value) {\n        if (!(key instanceof ESNumber))\n            return;\n        if (!(value instanceof ESString))\n            value = new ESString(str(value));\n        let idx = key.valueOf();\n        while (idx < 0)\n            idx = this.valueOf().length + idx;\n        const strToInsert = value.str().valueOf();\n        let firstPart = this.__value__.substr(0, idx);\n        let lastPart = this.__value__.substr(idx + strToInsert.length);\n        this.__value__ = firstPart + strToInsert + lastPart;\n    }\n    __pipe__(props, n) {\n        return new ESTypeUnion(this, n);\n    }\n    __ampersand__(props, n) {\n        return new ESTypeIntersection(this, n);\n    }\n}\n","import { ESString } from './primitives/esstring';\nimport { types } from \"../constants\";\nexport class ESSymbol {\n    constructor(value, identifier, options = {}) {\n        var _a, _b, _c;\n        this.clone = () => {\n            return new ESSymbol(this.value.clone(), this.identifier, {\n                isConstant: this.isConstant,\n                isAccessible: this.isAccessible\n            });\n        };\n        this.str = () => new ESString(`<Symbol: ${this.identifier}>`);\n        this.value = value;\n        this.identifier = identifier;\n        this.isConstant = (_a = options.isConstant) !== null && _a !== void 0 ? _a : false;\n        this.isAccessible = (_b = options.isAccessible) !== null && _b !== void 0 ? _b : true;\n        this.type = (_c = options.type) !== null && _c !== void 0 ? _c : types.any;\n    }\n}\n","import { ESError } from '../../errors';\nimport { ESSymbol } from '../symbol';\nimport { ESArray } from './esarray';\nimport { ESBoolean } from './esboolean';\nimport { ESErrorPrimitive } from './eserrorprimitive';\nimport { ESFunction } from './esfunction';\nimport { ESNumber } from './esnumber';\nimport { ESObject } from './esobject';\nimport { ESPrimitive } from './esprimitive';\nimport { ESString } from './esstring';\nimport { ESType } from './estype';\nimport { ESUndefined } from './esundefined';\nimport { ESJSBinding } from \"./esjsbinding\";\nexport function wrap(thing, functionsTakeProps = false) {\n    if (thing instanceof ESPrimitive) {\n        return thing;\n    }\n    else if (thing === undefined || thing === null) {\n        return new ESUndefined();\n    }\n    else if (thing instanceof ESError) {\n        return new ESErrorPrimitive(thing);\n    }\n    else if (thing instanceof ESSymbol) {\n        return thing.value;\n    }\n    else if (typeof thing === 'number') {\n        return new ESNumber(thing);\n    }\n    else if (typeof thing === 'string') {\n        return new ESString(thing);\n    }\n    else if (typeof thing === 'boolean') {\n        return new ESBoolean(thing);\n    }\n    else if (typeof thing === 'bigint') {\n        return new ESNumber(Number(thing));\n    }\n    else if (typeof thing === 'symbol') {\n        return new ESString(String(thing));\n    }\n    else if (Array.isArray(thing)) {\n        return new ESArray(thing.map(o => wrap(o, functionsTakeProps)));\n    }\n    return new ESJSBinding(thing, undefined, functionsTakeProps);\n}\nexport function strip(thing, props) {\n    if (!(thing instanceof ESPrimitive)) {\n        return thing;\n    }\n    else if (thing instanceof ESArray) {\n        return thing.valueOf().map(m => strip(m, props), props);\n    }\n    else if (thing instanceof ESObject) {\n        let val = {};\n        for (let key in thing.valueOf()) {\n            val[key] = strip(thing.valueOf()[key], props);\n        }\n        return val;\n    }\n    else if (thing instanceof ESUndefined) {\n        return undefined;\n    }\n    else if (thing instanceof ESFunction) {\n        return (...args) => {\n            const res = thing.__call__(props, ...args.map(a => wrap(a)));\n            if (res instanceof ESError) {\n                console.error(res.str);\n                return res;\n            }\n            return strip(res, props);\n        };\n    }\n    else if (thing instanceof ESType) {\n        return thing;\n    }\n    return thing.valueOf();\n}\n","import { IS_NODE_INSTANCE } from \"../constants\";\nconst codes = {\n    red: 31,\n    yellow: 33,\n    green: 32,\n    cyan: 36,\n    blue: 34,\n    grey: 2\n};\nconst c = {};\nfor (let code of Object.keys(codes)) {\n    c[code] = (s) => {\n        s || (s = '');\n        if (IS_NODE_INSTANCE) {\n            return `\\x1b[${codes[code]}m` + s + '\\x1b[0m';\n        }\n        return `<span style=\"color: ${code}\">${s}</span>`;\n    };\n}\nexport default c;\n","import { TypeError } from '../../errors';\nimport { Position } from '../../position';\nimport { ESNumber, ESString } from '../../runtime/primitiveTypes';\nimport { str } from '../../util/util';\nconst module = {\n    asciiToChar: (props, number) => {\n        if (!(number instanceof ESNumber)) {\n            return new TypeError(Position.void, 'number', str(number.typeName()), str(number));\n        }\n        return new ESString(String.fromCharCode(number.valueOf()));\n    },\n    charToAscii: (props, char) => {\n        if (!(char instanceof ESString)) {\n            return new TypeError(Position.void, 'string', str(char.typeName()), str(char));\n        }\n        return new ESNumber(str(char).charCodeAt(0));\n    },\n};\nexport default module;\n","import { strip } from '../../runtime/primitives/wrapStrip';\nimport { str } from '../../util/util';\nimport { global } from \"../../constants\";\nconst module = {\n    parse: (json) => {\n        return JSON.parse(str(json));\n    },\n    stringify: (json) => {\n        return JSON.stringify(strip(json, { context: global }));\n    }\n};\nexport default module;\n","let AllowAny = Symbol('AllowAny');\nexport function defaultPermissions() {\n    return {\n        networking: false,\n        imports: true,\n        accessDOM: false,\n        useSTD: true,\n        fileSystem: false,\n    };\n}\nexport const config = {\n    permissions: defaultPermissions(),\n    modules: {\n        [AllowAny]: 'y'\n    },\n};\nfunction pathAsString(path) {\n    let res = '[';\n    for (let p of path) {\n        res += p + '][';\n    }\n    return res.substring(0, res.length - 1);\n}\nfunction parsePartOfConfig(config, configJSON, path = []) {\n    if (!config[AllowAny]) {\n        const unknownProps = Object.keys(configJSON).filter(x => !(x in config));\n        for (const k of unknownProps) {\n            console.error(`Cannot parse config`, ` - unknown property config${pathAsString([...path, k])}`);\n        }\n    }\n    for (const key of Object.keys(configJSON)) {\n        if (typeof config[key] !== typeof configJSON[key] && !config[AllowAny]) {\n            console.error(`Cannot parse config`, ` - config${pathAsString([...path, key])} should be of type '${typeof config[key]}'`);\n            return;\n        }\n        if (typeof config[key] === 'object') {\n            parsePartOfConfig(config[key], configJSON[key], [...path, key]);\n            continue;\n        }\n        config[key] = configJSON[key];\n    }\n}\nexport function parseConfig(configJSON) {\n    parsePartOfConfig(config, configJSON);\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { global, IS_NODE_INSTANCE, libs } from '../constants';\nimport { ESError } from '../errors';\nimport { ESSymbol } from '../runtime/symbol';\nimport { ESJSBinding } from \"../runtime/primitives/esjsbinding\";\nimport ascii from './built-in-modules/ascii';\nimport json from './built-in-modules/json';\nimport dom from './built-in-modules/dom';\nimport time from './built-in-modules/time';\nimport { Position } from \"../position\";\nimport { Context } from \"../runtime/context\";\nimport { ESNamespace } from \"../runtime/primitives/esnamespace\";\nimport { ESString } from \"../runtime/primitives/esstring\";\nimport { run } from \"../index\";\nconst modules = {};\nconst processedModules = {};\nexport function initModules() {\n    processedModules['math'] = new ESJSBinding(Math);\n    processedModules['promise'] = new ESJSBinding(Promise);\n    processedModules['time'] = new ESJSBinding(time(libs));\n    processedModules['json'] = new ESJSBinding(json);\n    processedModules['ascii'] = new ESJSBinding(ascii);\n    if (!IS_NODE_INSTANCE) {\n        const domRes = dom(libs);\n        if (!(domRes instanceof ESError)) {\n            modules['dom'] = domRes;\n        }\n        else {\n            return domRes;\n        }\n    }\n}\nexport function processRawModule(module, name) {\n    const moduleDict = {};\n    const moduleRaw = module.valueOf();\n    for (const key of Object.keys(moduleRaw)) {\n        moduleDict[key] = new ESSymbol(moduleRaw[key], key);\n    }\n    return new ESJSBinding(moduleDict, name);\n}\nexport function moduleExist(name) {\n    return name in modules || name in processedModules;\n}\nexport function addModule(name, body) {\n    modules[name] = {};\n    processedModules[name] = body;\n}\nexport function getModule(name) {\n    if (name in processedModules) {\n        return processedModules[name];\n    }\n    if (name in modules) {\n        const res = new ESJSBinding(modules[name]);\n        const processed = processRawModule(res, name);\n        processedModules[name] = processed;\n        return processed;\n    }\n}\nexport function preloadModules(urls) {\n    return __awaiter(this, void 0, void 0, function* () {\n        for (const name of Object.keys(urls)) {\n            let url = urls[name];\n            if (url.substring(url.length - 3) !== '.es') {\n                url = url + '.es';\n            }\n            try {\n                let data = yield (yield fetch(url)).text();\n                const env = new Context();\n                env.parent = global;\n                let splitUrl = url.split(\"/\");\n                let scriptName = splitUrl.pop();\n                let exDir = splitUrl.join(\"/\");\n                const n = new ESNamespace(new ESString(scriptName), {});\n                const res = run(data, {\n                    env,\n                    fileName: name,\n                    currentDir: exDir,\n                });\n                n.__value__ = env.getSymbolTableAsDict();\n                if (res.error) {\n                    return res.error;\n                }\n                processedModules[name] = n;\n            }\n            catch (E) {\n                return new ESError(Position.void, 'ImportError', E.toString());\n            }\n        }\n    });\n}\n","import { ESError, ImportError, TypeError, ReferenceError } from \"../errors\";\nimport { Position } from \"../position\";\nimport { strip, wrap } from '../runtime/primitives/wrapStrip';\nimport { ESArray, ESFunction, ESNamespace, ESNumber, ESObject, ESPrimitive, ESString, ESUndefined } from '../runtime/primitiveTypes';\nimport { indent, sleep, str } from '../util/util';\nimport { ESJSBinding } from \"../runtime/primitives/esjsbinding\";\nimport chalk from \"../util/colours\";\nimport { IS_NODE_INSTANCE } from \"../constants\";\nimport { getModule, moduleExist } from \"./builtInModules\";\nexport const builtInFunctions = {\n    'range': [({ context }, minP, maxP, stepP) => {\n            if (!(minP instanceof ESNumber)) {\n                return new ESArray();\n            }\n            const min = minP.valueOf();\n            if (maxP instanceof ESUndefined) {\n                try {\n                    return new ESArray([...Array(min).keys()].map(n => new ESNumber(n)));\n                }\n                catch (e) {\n                    return new ESError(Position.void, 'RangeError', `Cannot make range of length '${str(min)}'`);\n                }\n            }\n            let step = 1;\n            if (!(maxP instanceof ESNumber)) {\n                return new TypeError(Position.void, 'number', maxP.typeName(), str(maxP));\n            }\n            let max = maxP.valueOf();\n            if (!(stepP instanceof ESUndefined)) {\n                if (!(stepP instanceof ESNumber)) {\n                    return new TypeError(Position.void, 'number', stepP.typeName(), str(stepP));\n                }\n                step = stepP.valueOf();\n            }\n            let arr = [];\n            let i = min;\n            while (i < max) {\n                arr.push(new ESNumber(i));\n                i += step;\n            }\n            return new ESArray(arr);\n        }, {\n            args: [{\n                    name: 'N',\n                    type: 'Number',\n                }],\n            description: 'Generates an array of integers given N. Starts at 0 and goes to N-1. Can be used like for i in range(10) ..., similarly to python.',\n            returns: 'array of numbers from 0 to N-1',\n            returnType: 'number[] | RangeError'\n        }],\n    'log': [({ context }, ...msgs) => {\n            console.log(...msgs.map(m => str(m)));\n        }, {\n            args: [{\n                    name: '...values',\n                    type: 'any[]'\n                }],\n            description: 'Uses console.log to log all values',\n            returnType: 'void'\n        }],\n    'parse_num': [({ context }, num) => {\n            try {\n                const val = parseFloat(str(num));\n                if (isNaN(val)) {\n                    return new ESError(Position.void, 'TypeError', `Cannot convert '${str(num)}' to a number.`);\n                }\n                return new ESNumber(val);\n            }\n            catch (e) {\n                return new ESError(Position.void, 'TypeError', `Cannot convert '${str(num)}' to a number.`);\n            }\n        }, {\n            args: [{\n                    name: 'num',\n                    type: 'any'\n                }],\n            description: `Converts a string of digits into a number. Works with decimals and integers. Calls .str() on value before using native JS 'parseFloat' function. Returns TypeError if the string can't be converted into a number.`,\n            returnType: 'number | TypeError'\n        }],\n    'help': [({ context }, ...things) => {\n            if (!things.length) {\n                return new ESString('Visit https://entropygames.io/entropy-script for help with Entropy Script!\\n' +\n                    'Try \\'help(<anything>)\\' for help about a particular object.');\n            }\n            let out = '';\n            for (const thing of things) {\n                if (!(thing instanceof ESPrimitive)) {\n                    console.log('Invalid arg not primitive: ' + str(thing));\n                    return;\n                }\n                const info = thing.info;\n                out += `${chalk.yellow(`Help on '${info.name || '(anonymous)'}'`)}:\n    \n    ${chalk.yellow('Value')}: ${indent(indent(str(thing)))}\n    ${chalk.yellow('Type')}: '${str(thing.typeName())}'\n    ${chalk.yellow('Location')}: ${info.file || chalk.yellow('(unknown)')}\n    \n        ${chalk.green(info.description) || `No description.`}\n        \n    ${info.helpLink ? chalk.cyan(info.helpLink + '\\n\\n') : ''}\n`;\n                if (info.args && thing instanceof ESFunction) {\n                    const total = info.args.length;\n                    const required = info.args.filter(a => a.required).length;\n                    if (total == required)\n                        out += chalk.yellow(`    Arguments (${total}): \\n`);\n                    else\n                        out += chalk.yellow(`    Arguments (${required}-${total}): \\n`);\n                    for (const [idx, arg] of info.args.entries()) {\n                        if (typeof arg !== 'object')\n                            out += `        ${idx + 1}. INVALID ARG INFO`;\n                        else\n                            out += `        ${idx + 1}. ${arg.name}${arg.required === false ? chalk.yellow(' (optional) ') : ' '}{${arg.type}} ${arg.description || ''}\\n`;\n                    }\n                    out += `\\n\\n`;\n                    if (info.returns)\n                        out += `    Returns: ${info.returns}\\n\\n`;\n                    if (info.returnType)\n                        out += `    Return Type: ${info.returnType}\\n\\n`;\n                }\n                if (info.contents && (thing instanceof ESObject || thing instanceof ESNamespace)) {\n                    out += '    Properties: \\n      ';\n                    for (let contents of info.contents)\n                        out += contents.name + '\\n      ';\n                }\n            }\n            console.log(out);\n            if (things.length > 1) {\n                return new ESArray(things);\n            }\n            if (things) {\n                return things[0];\n            }\n        }, {\n            args: [{\n                    name: 'value',\n                    type: 'any'\n                }],\n            description: 'logs info on value',\n            returns: 'value passed in'\n        }],\n    'delete': [({ context }, name) => {\n            const id = str(name);\n            if (!context.has(id)) {\n                return new ESError(Position.void, 'DeleteError', `Identifier '${id}' not found in the current context`);\n            }\n            context.set(id, new ESUndefined());\n        }, {\n            name: 'delete',\n            args: [{ name: 'identifier', type: 'string' }],\n            description: 'Deletes a variable from the current context'\n        }],\n    '__path__': [({ context }) => {\n            return new ESString(context.path);\n        }, {\n            name: '__path__',\n            args: [],\n            description: 'Returns the current path'\n        }],\n    '__symbols__': [({ context }, recursive) => {\n            if (recursive.bool().valueOf()) {\n                let keys = context.keys;\n                while (context.parent) {\n                    keys = context.parent.keys;\n                    context = context.parent;\n                }\n                return wrap(keys);\n            }\n            return wrap(context.keys);\n        }, {\n            name: '__symbols',\n            args: [{\n                    name: 'recursive',\n                    type: 'Bool',\n                    description: 'if true, returns the names of all symbols available in the current scope, if false, just the symbols declared in the current scope.'\n                }],\n            description: 'Returns an array of the names of all symbols in the current context'\n        }],\n    'using': [(props, module, global_) => {\n            if (!(module instanceof ESNamespace) && !(module instanceof ESJSBinding) && !(module instanceof ESObject)) {\n                return new TypeError(Position.void, 'Namespace', str(module.typeName()));\n            }\n            let { context } = props;\n            let global = !(global_ && !global_.bool().valueOf());\n            let value = strip(module, props);\n            if (global) {\n                context = context.root;\n            }\n            else if (context.parent) {\n                context = context.parent;\n            }\n            for (const key of Object.keys(value)) {\n                let res = context.setOwn(key, wrap(value[key]));\n                if (res)\n                    return res;\n            }\n        }, {\n            name: 'using',\n            args: [\n                { name: 'module', type: 'namespace' },\n                { name: 'global', type: 'bool' }\n            ],\n            description: 'Adds contents of a namespace to the current or global context'\n        }],\n    'sleep': [({ context }, time, cb) => {\n            if (!(time instanceof ESNumber)) {\n                return new TypeError(Position.void, 'number', str(time.typeName()), str(time));\n            }\n            sleep(time.valueOf())\n                .then(() => {\n                const res = cb.__call__({ context });\n                if (res instanceof ESError) {\n                    console.log(res.str);\n                }\n            });\n        }, {\n            name: 'sleep',\n            args: [{ name: 'n', type: 'number' }, { name: 'callback', type: 'function' }],\n            description: 'Waits n milliseconds and then executes the callback'\n        }],\n    'throw': [({ context }, name, details) => {\n            return new ESError(Position.void, str(name), str(details));\n        }, {\n            name: 'throw',\n            args: [{ name: 'name', type: 'String' }, { name: 'details', type: 'String' }]\n        }],\n    'typeof': [({ context }, symbolPrim) => {\n            if (!(symbolPrim instanceof ESString)) {\n                return new TypeError(Position.void, 'String', symbolPrim.typeName(), str(symbolPrim));\n            }\n            let symbol = str(symbolPrim);\n            if (!context.has(symbol)) {\n                return new ReferenceError(Position.void, symbol);\n            }\n            let res = context.getSymbol(symbol);\n            if (!res) {\n                return new ReferenceError(Position.void, symbol);\n            }\n            if (res instanceof ESError) {\n                return res;\n            }\n            return res.type;\n        }, {\n            name: 'typeof',\n            args: [\n                { name: 'identifier', type: 'String' }\n            ]\n        }]\n};\nexport function addDependencyInjectedBIFs(printFunc, inputFunc) {\n    builtInFunctions['import'] = [(props, rawUrl) => {\n            if (IS_NODE_INSTANCE) {\n                return new ESError(Position.void, 'ImportError', 'Is running in node instance but trying to run browser import function');\n            }\n            if (!(rawUrl instanceof ESString)) {\n                return new TypeError(Position.void, 'String', rawUrl.typeName(), str(rawUrl));\n            }\n            const url = str(rawUrl);\n            if (moduleExist(url)) {\n                return getModule(url);\n            }\n            return new ImportError(Position.void, url, 'Module not found. Try adding it to the pre-loaded modules.');\n        }, {\n            description: 'Loads a module. Cannot be used asynchronously, so add any modules to pre-load in the esconfig.json file.'\n        }];\n    builtInFunctions['print'] = [({ context }, ...args) => {\n            let out = ``;\n            for (let arg of args) {\n                out += str(arg);\n            }\n            printFunc(out);\n        }, {}];\n    builtInFunctions['input'] = [({ context }, msg, cbRaw) => {\n            inputFunc(msg.valueOf(), (msg) => {\n                let cb = cbRaw === null || cbRaw === void 0 ? void 0 : cbRaw.valueOf();\n                if (cb instanceof ESFunction) {\n                    let res = cb.__call__({ context }, new ESString(msg));\n                    if (res instanceof ESError) {\n                        console.log(res.str);\n                    }\n                }\n                else if (typeof cb === 'function') {\n                    cb(msg);\n                }\n                return new ESString('\\'input()\\' does not return anything. Pass in a function as the second argument, which will take the user input as an argument.');\n            });\n        }, {}];\n}\n","import { addDependencyInjectedBIFs, builtInFunctions } from \"./built-in/builtInFunctions\";\nimport { initModules } from './built-in/builtInModules';\nimport { ESFunction } from './runtime/primitiveTypes';\nimport loadGlobalConstants from \"./built-in/globalConstants\";\nimport { types } from \"./constants\";\nexport function initialise(globalContext, printFunc, inputFunc) {\n    addDependencyInjectedBIFs(printFunc, inputFunc);\n    for (let builtIn in builtInFunctions) {\n        const fn = new ESFunction(builtInFunctions[builtIn][0], [], builtIn, undefined, undefined, globalContext, true);\n        fn.info = builtInFunctions[builtIn][1];\n        fn.info.name = builtIn;\n        fn.info.isBuiltIn = true;\n        fn.info.file = 'built-in';\n        globalContext.set(builtIn, fn, {\n            global: true,\n            isConstant: true,\n            type: types.function\n        });\n    }\n    loadGlobalConstants(globalContext);\n    const initModRes = initModules();\n    if (initModRes) {\n        return initModRes;\n    }\n    globalContext.initialisedAsGlobal = true;\n}\n","import { ESBoolean, ESUndefined } from '../runtime/primitiveTypes';\nimport { types } from \"../constants\";\nexport default function load(context) {\n    const globalConstants = {\n        'false': new ESBoolean(false),\n        'true': new ESBoolean(true),\n        'nil': new ESUndefined(),\n        'Any': types.any,\n        'Number': types.number,\n        'String': types.string,\n        'Bool': types.bool,\n        'Func': types.function,\n        'Array': types.array,\n        'Object': types.object,\n        'Type': types.type,\n        'Error': types.error,\n        'Undefined': types.undefined\n    };\n    for (let constant in globalConstants) {\n        const value = globalConstants[constant];\n        context.set(constant, value, {\n            global: true,\n            isConstant: true\n        });\n    }\n}\n","import { now } from '../../constants';\nimport { ESFunction } from '../../runtime/primitives/esfunction';\nimport { ESJSBinding } from '../../runtime/primitives/esjsbinding';\nimport { ESNumber } from '../../runtime/primitives/esnumber';\nconst module = (config) => ({\n    now: new ESFunction(() => new ESNumber(now())),\n    date: new ESJSBinding(Date)\n});\nexport default module;\n","import { IS_NODE_INSTANCE } from '../../constants';\nimport { InvalidRuntimeError, PermissionRequiredError, TypeError } from '../../errors';\nimport { ESJSBinding } from \"../../runtime/primitives/esjsbinding\";\nimport { config } from \"../../config\";\nimport { Position } from \"../../position\";\nconst module = () => {\n    if (!config.permissions.accessDOM) {\n        return new PermissionRequiredError('No access to DOM');\n    }\n    if (IS_NODE_INSTANCE) {\n        return new InvalidRuntimeError();\n    }\n    const w = window;\n    if (typeof w === 'undefined') {\n        return new TypeError(Position.void, 'Object', 'undefined', 'window', 'Window is undefined! ES expected to be in a browser.');\n    }\n    if (!('$' in w)) {\n        return {\n            window: new ESJSBinding(w, 'window'),\n            document: new ESJSBinding(w['document'], 'document'),\n        };\n    }\n    const $ = new ESJSBinding(w['$'], 'jquery');\n    return {\n        $,\n        window: new ESJSBinding(w, 'window'),\n        document: new ESJSBinding(w['document'], 'document'),\n    };\n};\nexport default module;\n","import { ESPrimitive } from \"./primitiveTypes\";\nexport function interpretArgument(arg, context) {\n    var _a;\n    const typeRes = arg.type.interpret(context);\n    if (typeRes.error) {\n        return typeRes.error;\n    }\n    let defaultValue;\n    if (arg.defaultValue) {\n        let defaultValRes = (_a = arg.defaultValue) === null || _a === void 0 ? void 0 : _a.interpret(context);\n        if (defaultValRes.error) {\n            return defaultValRes.error;\n        }\n        if (defaultValRes.val instanceof ESPrimitive) {\n            defaultValue = defaultValRes.val;\n        }\n    }\n    return {\n        name: arg.name,\n        type: typeRes.val,\n        defaultValue\n    };\n}\n","import { ESError, InvalidSyntaxError, ReferenceError, TypeError } from \"../errors\";\nimport { Context } from './context';\nimport { Position } from \"../position\";\nimport { catchBlockErrorSymbolName, now, tokenTypeString, tt, types } from \"../constants\";\nimport { interpretArgument } from \"./argument\";\nimport { wrap } from './primitives/wrapStrip';\nimport { ESArray, ESBoolean, ESErrorPrimitive, ESFunction, ESJSBinding, ESNamespace, ESNumber, ESObject, ESPrimitive, ESString, ESType, ESUndefined } from \"./primitiveTypes\";\nimport { generateRandomSymbol, str } from '../util/util';\nimport { ESTypeNot, ESTypeUnion } from \"./primitives/estype\";\nexport class interpretResult {\n    constructor(val) {\n        this.val = new ESUndefined();\n        this.shouldBreak = false;\n        this.shouldContinue = false;\n        if (val instanceof ESError) {\n            this.error = val;\n        }\n        else if (val) {\n            this.val = val;\n        }\n    }\n}\nexport class compileResult {\n    constructor(val) {\n        this.val = '';\n        this.hoisted = '';\n        if (typeof val === 'string') {\n            this.val = val;\n        }\n        else if (val) {\n            this.error = val;\n        }\n    }\n    register(node, config) {\n        const res = node.compilePy(config);\n        this.hoisted += res.hoisted;\n        if (res.error) {\n            this.error = res.error;\n            return '';\n        }\n        return res.val;\n    }\n}\nexport class Node {\n    constructor(pos, isTerminal = false) {\n        this.pos = pos;\n        this.isTerminal = isTerminal;\n    }\n    interpret(context) {\n        var _a;\n        const start = now();\n        const res = new interpretResult;\n        const val = this.interpret_(context);\n        if (val instanceof ESError) {\n            res.error = val;\n        }\n        else if (val instanceof interpretResult) {\n            res.val = val.val;\n            res.error = val.error;\n            res.funcReturn = val.funcReturn;\n            res.shouldBreak = val.shouldBreak;\n            res.shouldContinue = val.shouldContinue;\n        }\n        else {\n            res.val = val;\n        }\n        if (res.error && res.error.pos.isUnknown) {\n            res.error.pos = this.pos;\n        }\n        if (!(res.val instanceof ESPrimitive)) {\n            res.error = new TypeError(Position.void, 'Primitive', 'Native JS value', str(res.val));\n            res.val = new ESUndefined();\n        }\n        (_a = res.val.info).file || (_a.file = this.pos.file);\n        Node.interprets++;\n        let time = now() - start;\n        Node.totalTime += time;\n        if (time > Node.maxTime)\n            Node.maxTime = time;\n        return res;\n    }\n}\nNode.interprets = 0;\nNode.totalTime = 0;\nNode.maxTime = 0;\nexport class N_binOp extends Node {\n    constructor(pos, left, opTok, right) {\n        super(pos);\n        this.left = left;\n        this.opTok = opTok;\n        this.right = right;\n    }\n    interpret_(context) {\n        const left = this.left.interpret(context);\n        if (left.error)\n            return left.error;\n        const right = this.right.interpret(context);\n        if (right.error)\n            return right.error;\n        const l = left.val;\n        const r = right.val;\n        if (typeof l === 'undefined') {\n            return new TypeError(this.opTok.pos, '~undefined', 'undefined', l, 'N_binOp.interpret_');\n        }\n        if (typeof r === 'undefined') {\n            return new TypeError(this.opTok.pos, '~undefined', 'undefined', r, 'N_binOp.interpret_');\n        }\n        switch (this.opTok.type) {\n            case tt.LTE: {\n                const lt = l.__lt__({ context }, r);\n                const eq = l.__eq__({ context }, r);\n                if (lt instanceof ESError)\n                    return lt;\n                if (eq instanceof ESError)\n                    return eq;\n                return new interpretResult(lt.__or__({ context }, eq));\n            }\n            case tt.GTE: {\n                const gt = l.__gt__({ context }, r);\n                const eq = l.__eq__({ context }, r);\n                if (gt instanceof ESError)\n                    return gt;\n                if (eq instanceof ESError)\n                    return eq;\n                return new interpretResult(gt.__or__({ context }, eq));\n            }\n            case tt.NOTEQUALS: {\n                const res = l.__eq__({ context }, r);\n                if (res instanceof ESError)\n                    return res;\n                return new interpretResult(new ESBoolean(!res.bool().valueOf()));\n            }\n            case tt.ADD:\n                return new interpretResult(l.__add__({ context }, r));\n            case tt.SUB:\n                return new interpretResult(l.__subtract__({ context }, r));\n            case tt.MUL:\n                return new interpretResult(l.__multiply__({ context }, r));\n            case tt.DIV:\n                return new interpretResult(l.__divide__({ context }, r));\n            case tt.POW:\n                return new interpretResult(l.__pow__({ context }, r));\n            case tt.MOD:\n                return new interpretResult(l.__mod__({ context }, r));\n            case tt.EQUALS:\n                return new interpretResult(l.__eq__({ context }, r));\n            case tt.LT:\n                return new interpretResult(l.__lt__({ context }, r));\n            case tt.GT:\n                return new interpretResult(l.__gt__({ context }, r));\n            case tt.AND:\n                return new interpretResult(l.__and__({ context }, r));\n            case tt.OR:\n                return new interpretResult(l.__or__({ context }, r));\n            case tt.APMERSAND:\n                return new interpretResult(l.__ampersand__({ context }, r));\n            case tt.PIPE:\n                return new interpretResult(l.__pipe__({ context }, r));\n            default:\n                return new InvalidSyntaxError(this.opTok.pos, `Invalid binary operator: ${tokenTypeString[this.opTok.type]}`);\n        }\n    }\n    compileJS(config) {\n        const left = this.left.compileJS(config);\n        if (left.error)\n            return left;\n        const right = this.right.compileJS(config);\n        if (right.error)\n            return right;\n        if (config.minify) {\n            return new compileResult(`${left.val}${tokenTypeString[this.opTok.type]}${right.val}`);\n        }\n        return new compileResult(`${left.val} ${tokenTypeString[this.opTok.type]} ${right.val}`);\n    }\n    compilePy(config) {\n        const left = this.left.compilePy(config);\n        if (left.error)\n            return left;\n        const right = this.right.compilePy(config);\n        if (right.error)\n            return right;\n        const switchers = {\n            '&&': 'and',\n            '||': 'or',\n            '^': '**',\n        };\n        let op = tokenTypeString[this.opTok.type];\n        if (op in switchers) {\n            op = switchers[op];\n        }\n        return new compileResult(`${left.val} ${op} ${right.val}`);\n    }\n}\nexport class N_unaryOp extends Node {\n    constructor(pos, a, opTok) {\n        super(pos);\n        this.a = a;\n        this.opTok = opTok;\n    }\n    interpret_(context) {\n        var _a, _b, _c;\n        const res = this.a.interpret(context);\n        if (res.error)\n            return res.error;\n        switch (this.opTok.type) {\n            case tt.SUB:\n            case tt.ADD:\n                if (!(res.val instanceof ESNumber)) {\n                    return new TypeError(this.pos, 'Number', ((_a = res.val) === null || _a === void 0 ? void 0 : _a.typeName().toString()) || 'undefined_', (_b = res.val) === null || _b === void 0 ? void 0 : _b.valueOf());\n                }\n                const numVal = res.val.valueOf();\n                return new interpretResult(new ESNumber(this.opTok.type === tt.SUB ? -numVal : Math.abs(numVal)));\n            case tt.NOT:\n                return new interpretResult(new ESBoolean(!((_c = res === null || res === void 0 ? void 0 : res.val) === null || _c === void 0 ? void 0 : _c.bool().valueOf())));\n            case tt.BITWISE_NOT:\n                return new interpretResult(new ESTypeNot(res.val));\n            case tt.QM:\n                return new interpretResult(new ESTypeUnion(types.undefined, res.val));\n            default:\n                return new InvalidSyntaxError(this.opTok.pos, `Invalid unary operator: ${tokenTypeString[this.opTok.type]}`);\n        }\n    }\n    compileJS(config) {\n        const val = this.a.compileJS(config);\n        if (val.error)\n            return val;\n        return new compileResult(`${tokenTypeString[this.opTok.type]}${val.val}`);\n    }\n    compilePy(config) {\n        const val = this.a.compilePy(config);\n        if (val.error)\n            return val;\n        return new compileResult(`${tokenTypeString[this.opTok.type]}${val.val}`);\n    }\n}\nexport class N_varAssign extends Node {\n    constructor(pos, varNameTok, value, assignType = '=', isGlobal = false, isConstant = false, isDeclaration = false, type = types.any) {\n        super(pos);\n        this.value = value;\n        this.varNameTok = varNameTok;\n        this.isGlobal = isGlobal;\n        this.assignType = assignType;\n        this.isConstant = isConstant;\n        this.isDeclaration = isDeclaration;\n        if (type instanceof ESPrimitive) {\n            this.type = new N_primitiveWrapper(type);\n        }\n        else {\n            this.type = type;\n        }\n    }\n    interpret_(context) {\n        var _a, _b;\n        if (this.isDeclaration) {\n            if (context.hasOwn(this.varNameTok.value)) {\n                return new InvalidSyntaxError(this.pos, `Symbol '${this.varNameTok.value}' already exists, and cannot be redeclared`);\n            }\n            if (this.assignType !== '=') {\n                return new InvalidSyntaxError(this.pos, `Cannot declare variable with operator '${this.assignType}'`);\n            }\n            if (context.hasOwn(this.varNameTok.value)) {\n                return new InvalidSyntaxError(this.pos, `Cannot redeclare variable which exists in the current scope`);\n            }\n        }\n        const res = this.value.interpret(context);\n        const typeRes = this.type.interpret(context);\n        if (res.error)\n            return res.error;\n        if (typeRes.error)\n            return typeRes.error;\n        if (!typeRes.val) {\n            return new TypeError(this.varNameTok.pos, 'Type', 'undefined');\n        }\n        if (!res.val) {\n            return new TypeError(this.varNameTok.pos, '~undefined', 'undefined', 'N_varAssign.interpret_');\n        }\n        const typeCheckRes = typeRes.val.type_check({ context }, res.val);\n        if (typeCheckRes instanceof ESError)\n            return typeCheckRes;\n        if (!typeCheckRes.bool().valueOf()) {\n            return new TypeError(this.varNameTok.pos, str(typeRes.val), str((_a = res.val) === null || _a === void 0 ? void 0 : _a.typeName()), str(res.val));\n        }\n        if (this.isDeclaration) {\n            context.setOwn(this.varNameTok.value, res.val, {\n                global: false,\n                isConstant: this.isConstant,\n                type: typeRes.val\n            });\n            return new interpretResult(res.val);\n        }\n        if (context.has(this.varNameTok.value)) {\n            const symbol = context.getSymbol(this.varNameTok.value);\n            if (symbol instanceof ESError) {\n                return symbol;\n            }\n            if (symbol) {\n                if (!symbol.type.type_check({ context }, res.val).valueOf()) {\n                    return new TypeError(this.varNameTok.pos, str(symbol.type), (_b = res.val) === null || _b === void 0 ? void 0 : _b.typeName(), str(res.val));\n                }\n            }\n        }\n        if (this.assignType === '=') {\n            let value = res.val;\n            if (value === undefined) {\n                value = new ESUndefined();\n            }\n            const type = context.getSymbol(this.varNameTok.value);\n            if (type instanceof ESError) {\n                return type;\n            }\n            if (!type) {\n                return new InvalidSyntaxError(this.pos, `Cannot declare variable without keyword`);\n            }\n            const typeCheckRes = type.type.type_check({ context }, res.val);\n            if (typeCheckRes instanceof ESError)\n                return typeCheckRes;\n            if (!typeCheckRes.bool().valueOf()) {\n                return new TypeError(Position.void, str(type.type), str(res.val.__type__), str(res.val));\n            }\n            const setRes = context.set(this.varNameTok.value, value, {\n                global: this.isGlobal,\n                isConstant: this.isConstant,\n                type: type.type\n            });\n            if (setRes instanceof ESError) {\n                return setRes;\n            }\n        }\n        else {\n            const currentVal = context.get(this.varNameTok.value);\n            if (currentVal instanceof ESError)\n                return currentVal;\n            if (currentVal == undefined)\n                return new InvalidSyntaxError(this.pos, `Cannot declare variable with operator '${this.assignType}'`);\n            let newVal;\n            let assignVal = res.val;\n            switch (this.assignType[0]) {\n                case '*':\n                    newVal = currentVal.__multiply__({ context }, assignVal);\n                    break;\n                case '/':\n                    newVal = currentVal.__divide__({ context }, assignVal);\n                    break;\n                case '+':\n                    newVal = currentVal.__add__({ context }, assignVal);\n                    break;\n                case '-':\n                    newVal = currentVal.__subtract__({ context }, assignVal);\n                    break;\n                default:\n                    return new ESError(this.pos, 'AssignError', `Cannot find assignType of ${this.assignType[0]}`);\n            }\n            if (newVal instanceof ESError) {\n                return newVal;\n            }\n            let setRes = context.set(this.varNameTok.value, newVal, {\n                global: this.isGlobal,\n                isConstant: this.isConstant,\n                type: newVal.__type__\n            });\n            if (setRes instanceof ESError)\n                return setRes;\n            res.val = newVal;\n        }\n        if (res.val.info.name === '(anonymous)' || !res.val.info.name) {\n            res.val.info.name = this.varNameTok.value;\n        }\n        return res;\n    }\n    compileJS(config) {\n        const val = this.value.compileJS(config);\n        if (val.error)\n            return val;\n        let declaration = '';\n        if (this.isDeclaration) {\n            if (this.isGlobal) {\n                declaration = 'var';\n            }\n            else if (this.isConstant) {\n                declaration = 'const';\n            }\n            else {\n                declaration = 'let';\n            }\n        }\n        let assign = this.assignType;\n        if (assign !== '=') {\n            assign += '=';\n        }\n        if (config.minify) {\n            return new compileResult(`${declaration} ${this.varNameTok.value}${assign}${val.val}`);\n        }\n        return new compileResult(`${declaration} ${this.varNameTok.value} ${assign} ${val.val}`);\n    }\n    compilePy(config) {\n        const res = new compileResult;\n        const val = this.value.compilePy(config);\n        if (val.error)\n            return val;\n        res.hoisted += val.hoisted;\n        let assign = this.assignType;\n        if (assign !== '=') {\n            assign += '=';\n        }\n        if (this.isGlobal) {\n            res.hoisted += `${this.varNameTok.value}=None`;\n        }\n        if (config.minify) {\n            res.val = `${this.varNameTok.value}${assign}${val.val}`;\n        }\n        else {\n            res.val = `${this.varNameTok.value} ${assign} ${val.val}`;\n        }\n        return res;\n    }\n}\nexport class N_if extends Node {\n    constructor(pos, comparison, ifTrue, ifFalse) {\n        super(pos);\n        this.comparison = comparison;\n        this.ifFalse = ifFalse;\n        this.ifTrue = ifTrue;\n    }\n    interpret_(context) {\n        var _a;\n        let newContext = new Context();\n        newContext.parent = context;\n        let res = new interpretResult();\n        let compRes = this.comparison.interpret(context);\n        if (compRes.error)\n            return compRes;\n        if ((_a = compRes.val) === null || _a === void 0 ? void 0 : _a.bool().valueOf()) {\n            return this.ifTrue.interpret(newContext);\n        }\n        else if (this.ifFalse) {\n            return this.ifFalse.interpret(newContext);\n        }\n        return res;\n    }\n    compileJS(config) {\n        const indent = ' '.repeat(config.indent);\n        const highIndent = ' '.repeat(config.indent + 4);\n        config.indent += 4;\n        const statementRes = this.comparison.compileJS(config);\n        if (statementRes.error)\n            return statementRes;\n        const ifTrueRes = this.ifTrue.compileJS(config);\n        if (ifTrueRes.error)\n            return ifTrueRes;\n        if (!this.ifFalse) {\n            if (config.minify) {\n                return new compileResult(`if(${statementRes.val}){${ifTrueRes.val}\\n}`);\n            }\n            return new compileResult(`if (${statementRes.val}) {\\n${ifTrueRes.val}\\n}`);\n        }\n        config.indent = highIndent.length;\n        let ifFalseRes = this.ifFalse.compileJS(config);\n        if (ifFalseRes.error)\n            return ifFalseRes;\n        if (!(this.ifFalse instanceof N_statements)) {\n            ifFalseRes.val = highIndent + ifFalseRes.val;\n        }\n        if (config.minify) {\n            return new compileResult(`if(${statementRes.val}){${ifTrueRes.val}}else{${ifFalseRes.val}}`);\n        }\n        return new compileResult(`if (${statementRes.val}) {\\n${ifTrueRes.val}\\n${indent}} else {\\n${ifFalseRes.val}\\n${indent}}`);\n    }\n    compilePy(config) {\n        const res = new compileResult;\n        const indent = ' '.repeat(config.indent);\n        const highIndent = ' '.repeat(config.indent + 4);\n        config.indent += 4;\n        const statementRes = this.comparison.compilePy(config);\n        if (statementRes.error)\n            return statementRes;\n        res.hoisted += statementRes.hoisted;\n        const ifTrueRes = this.ifTrue.compilePy(config);\n        if (ifTrueRes.error)\n            return ifTrueRes;\n        res.hoisted += ifTrueRes.hoisted;\n        if (!this.ifFalse) {\n            return new compileResult(`if ${statementRes.val}:\\n${highIndent}${ifTrueRes.val}`);\n        }\n        const ifFalseRes = this.ifFalse.compilePy(config);\n        if (ifFalseRes.error)\n            return ifFalseRes;\n        res.hoisted += ifFalseRes.hoisted;\n        if (!(this.ifFalse instanceof N_statements)) {\n            ifFalseRes.val = highIndent + ifFalseRes.val;\n        }\n        return new compileResult(`if ${statementRes.val}:\\n${ifTrueRes.val}\\n${indent}else:\\n${ifFalseRes.val}\\n${indent}`);\n    }\n}\nexport class N_while extends Node {\n    constructor(pos, comparison, loop) {\n        super(pos);\n        this.comparison = comparison;\n        this.loop = loop;\n    }\n    interpret_(context) {\n        var _a, _b;\n        while (true) {\n            let newContext = new Context();\n            newContext.parent = context;\n            let shouldLoop = this.comparison.interpret(context);\n            if (shouldLoop.error)\n                return shouldLoop;\n            if (!((_b = (_a = shouldLoop.val) === null || _a === void 0 ? void 0 : _a.bool()) === null || _b === void 0 ? void 0 : _b.valueOf()))\n                break;\n            let potentialError = this.loop.interpret(newContext);\n            if (potentialError.error)\n                return potentialError;\n            if (potentialError.shouldBreak)\n                break;\n        }\n        return new interpretResult(new ESUndefined());\n    }\n    compileJS(config) {\n        config.indent += 4;\n        const comparisonRes = this.comparison.compileJS(config);\n        if (comparisonRes.error)\n            return comparisonRes;\n        const bodyRes = this.loop.compileJS(config);\n        if (bodyRes.error)\n            return bodyRes;\n        if (config.minify) {\n            return new compileResult(`while(${comparisonRes.val}){${bodyRes.val}}`);\n        }\n        return new compileResult(`while (${comparisonRes.val}) {\\n${bodyRes.val}}`);\n    }\n    compilePy(config) {\n        const res = new compileResult;\n        const highIndent = ' '.repeat(config.indent || 0);\n        const comparisonRes = this.comparison.compilePy(config);\n        if (comparisonRes.error)\n            return comparisonRes;\n        res.hoisted += comparisonRes.hoisted;\n        const bodyRes = this.loop.compilePy(config);\n        if (bodyRes.error)\n            return bodyRes;\n        res.hoisted += bodyRes.hoisted;\n        return new compileResult(`while ${comparisonRes.val}:\\n${highIndent}${bodyRes.val}`);\n    }\n}\nexport class N_for extends Node {\n    constructor(pos, body, array, identifier, isGlobalIdentifier, isConstIdentifier) {\n        super(pos);\n        this.body = body;\n        this.array = array;\n        this.identifier = identifier;\n        this.isGlobalId = isGlobalIdentifier;\n        this.isConstId = isConstIdentifier;\n    }\n    interpret_(context) {\n        var _a, _b, _c;\n        const array = this.array.interpret(context);\n        if (array.error)\n            return array;\n        if (context.has(this.identifier.value) && this.isGlobalId) {\n            return new InvalidSyntaxError(this.identifier.pos, 'Cannot declare global variable which exists in the current scope');\n        }\n        function iteration(body, id, element, isGlobal, isConstant) {\n            let newContext = new Context();\n            newContext.parent = context;\n            newContext.set(id, element, {\n                global: isGlobal,\n                isConstant,\n                type: element.__type__\n            });\n            const res = body.interpret(newContext);\n            if (res.error || (res.funcReturn !== undefined))\n                return res;\n            if (res.shouldBreak) {\n                res.shouldBreak = false;\n                return 'break';\n            }\n            if (res.shouldContinue) {\n                res.shouldContinue = false;\n            }\n        }\n        if (array.val instanceof ESNumber) {\n            for (let i = 0; i < array.val.valueOf(); i++) {\n                const res = iteration(this.body, this.identifier.value, new ESNumber(i), this.isGlobalId, this.isConstId);\n                if (res === 'break')\n                    break;\n                if (res && (res.error || (res.funcReturn !== undefined)))\n                    return res;\n            }\n        }\n        else if (array.val instanceof ESObject || array.val instanceof ESJSBinding) {\n            for (let element in (_a = array.val) === null || _a === void 0 ? void 0 : _a.valueOf()) {\n                const res = iteration(this.body, this.identifier.value, new ESString(element), this.isGlobalId, this.isConstId);\n                if (res === 'break')\n                    break;\n                if (res && (res.error || (res.funcReturn !== undefined)))\n                    return res;\n            }\n        }\n        else if (array.val instanceof ESArray) {\n            for (let element of (_b = array.val) === null || _b === void 0 ? void 0 : _b.valueOf()) {\n                const res = iteration(this.body, this.identifier.value, element, this.isGlobalId, this.isConstId);\n                if (res === 'break')\n                    break;\n                if (res && (res.error || (res.funcReturn !== undefined)))\n                    return res;\n            }\n        }\n        else if (array.val instanceof ESString) {\n            for (let element of (_c = array.val) === null || _c === void 0 ? void 0 : _c.valueOf()) {\n                const res = iteration(this.body, this.identifier.value, new ESString(element), this.isGlobalId, this.isConstId);\n                if (res === 'break')\n                    break;\n                if (res && (res.error || (res.funcReturn !== undefined)))\n                    return res;\n            }\n        }\n        else\n            return new TypeError(this.identifier.pos, 'Array | Number | Object | String', typeof array.val);\n        return new interpretResult(new ESUndefined());\n    }\n    compileJS(config) {\n        const indent = ' '.repeat(config.indent);\n        config.indent += 4;\n        const iteratorRes = this.array.compileJS(config);\n        if (iteratorRes.error)\n            return iteratorRes;\n        const bodyRes = this.body.compileJS(config);\n        if (bodyRes.error)\n            return bodyRes;\n        let declaration = 'let';\n        if (this.isGlobalId) {\n            declaration = 'var';\n        }\n        else if (this.isConstId) {\n            declaration = 'const';\n        }\n        if (config.minify) {\n            return new compileResult(`for(${declaration} ${this.identifier.value} of ${iteratorRes.val}){${bodyRes.val}\\n${indent}}`);\n        }\n        return new compileResult(`for (${declaration} ${this.identifier.value} of ${iteratorRes.val}) {\\n${bodyRes.val}\\n${indent}}`);\n    }\n    compilePy(config) {\n        const res = new compileResult;\n        config.indent += 4;\n        const iteratorRes = res.register(this.array, config);\n        if (res.error)\n            return res;\n        const bodyRes = res.register(this.body, config);\n        if (res.error)\n            return res;\n        if (this.isGlobalId) {\n            res.hoisted += `${this.identifier.value}=None`;\n        }\n        res.val = `for ${this.identifier.value} in ${iteratorRes}:\\n${bodyRes}`;\n        return res;\n    }\n}\nexport class N_array extends Node {\n    constructor(pos, items, shouldClone = false) {\n        super(pos);\n        this.items = items;\n        this.shouldClone = shouldClone;\n    }\n    interpret_(context) {\n        let result = new interpretResult();\n        let interpreted = [];\n        for (let item of this.items) {\n            const res = item.interpret(context);\n            if (res.error || (res.funcReturn !== undefined))\n                return res;\n            if (!res.val)\n                continue;\n            let val = res.val;\n            if (this.shouldClone) {\n                val = val.clone();\n            }\n            interpreted.push(val);\n        }\n        result.val = new ESArray(interpreted);\n        return result;\n    }\n    compileJS(config) {\n        const res = new compileResult('[');\n        for (let item of this.items) {\n            const itemRes = item.compileJS(config);\n            if (itemRes.error)\n                return itemRes;\n            res.val += itemRes.val + ',';\n        }\n        res.val += ']';\n        return res;\n    }\n    compilePy(config) {\n        const res = new compileResult('[');\n        for (let item of this.items) {\n            const itemRes = res.register(item, config);\n            if (res.error)\n                return res;\n            res.val += itemRes + ',';\n        }\n        res.val += ']';\n        return res;\n    }\n}\nexport class N_objectLiteral extends Node {\n    constructor(pos, properties) {\n        super(pos);\n        this.properties = properties;\n    }\n    interpret_(context) {\n        let interpreted = {};\n        for (const [keyNode, valueNode] of this.properties) {\n            const value = valueNode.interpret(context);\n            if (value.error)\n                return value.error;\n            const key = keyNode.interpret(context);\n            if (key.error)\n                return key.error;\n            if (key.val && value.val) {\n                interpreted[key.val.valueOf()] = value.val;\n            }\n        }\n        return new interpretResult(new ESObject(interpreted));\n    }\n    compileJS(config) {\n        const res = new compileResult('{');\n        for (const [keyNode, valueNode] of this.properties) {\n            const value = valueNode.compileJS(config);\n            if (value.error)\n                return value;\n            const key = keyNode.compileJS(config);\n            if (key.error)\n                return key;\n            if (key.val && value.val) {\n                res.val += `[${key.val}]: ${value.val},`;\n            }\n        }\n        res.val += '}';\n        return res;\n    }\n    compilePy(config) {\n        const res = new compileResult('{');\n        for (const [keyNode, valueNode] of this.properties) {\n            const value = res.register(valueNode, config);\n            if (res.error)\n                return res;\n            const key = res.register(keyNode, config);\n            if (res.error)\n                return res;\n            if (key && value) {\n                res.val += `${key}: ${value},`;\n            }\n        }\n        res.val += '}';\n        return res;\n    }\n}\nexport class N_statements extends Node {\n    constructor(pos, items, topLevel = false) {\n        super(pos);\n        this.items = items;\n        this.topLevel = topLevel;\n    }\n    interpret_(context) {\n        if (!this.topLevel) {\n            let last;\n            for (let item of this.items) {\n                const res = item.interpret(context);\n                if (res.error || (typeof res.funcReturn !== 'undefined') || res.shouldBreak || res.shouldContinue)\n                    return res;\n                last = res.val;\n            }\n            return new interpretResult(last || new ESUndefined());\n        }\n        else {\n            let result = new interpretResult();\n            let interpreted = [];\n            for (let item of this.items) {\n                const res = item.interpret(context);\n                if (res.error || (res.funcReturn !== undefined))\n                    return res;\n                if (!res.val)\n                    continue;\n                let val = res.val.clone();\n                interpreted.push(val);\n            }\n            result.val = new ESArray(interpreted);\n            return result;\n        }\n    }\n    compileJS(config) {\n        const res = new compileResult;\n        const indent = ' '.repeat(config.indent);\n        res.val += indent;\n        for (let item of this.items) {\n            const itemRes = item.compileJS(config);\n            if (itemRes.error)\n                return itemRes;\n            res.val += itemRes.val + ';';\n            if (!config.minify) {\n                res.val += '\\n' + indent;\n            }\n        }\n        return res;\n    }\n    compilePy(config) {\n        const res = new compileResult;\n        const indent = ' '.repeat(config.indent);\n        res.val += indent;\n        for (let item of this.items) {\n            const itemRes = res.register(item, config);\n            if (res.error)\n                return res;\n            res.val += itemRes;\n            res.val += '\\n' + indent;\n        }\n        return res;\n    }\n}\nexport class N_functionCall extends Node {\n    constructor(pos, to, args) {\n        super(pos);\n        this.arguments = args;\n        this.to = to;\n    }\n    interpret_(context) {\n        let { val, error } = this.to.interpret(context);\n        if (error) {\n            return error;\n        }\n        if (!val) {\n            return new TypeError(this.pos, 'any', 'undefined', undefined, 'On function call');\n        }\n        let params = [];\n        for (let arg of this.arguments) {\n            const res = arg.interpret(context);\n            if (res.error) {\n                return res.error;\n            }\n            if (res.val) {\n                params.push(res.val);\n            }\n        }\n        const res = val.__call__({ context }, ...params);\n        if (res instanceof ESError) {\n            res.traceback.push({\n                position: this.pos,\n                line: `${val.info.name || '<AnonFunction>'}(${params.map(str).join(', ')})`\n            });\n        }\n        return new interpretResult(res);\n    }\n    compileJS(config) {\n        const res = new compileResult;\n        const funcRes = this.to.compileJS(config);\n        if (funcRes.error)\n            return funcRes;\n        res.val = funcRes.val + '(';\n        for (let arg of this.arguments) {\n            const argRes = arg.compileJS(config);\n            if (argRes.error)\n                return argRes;\n            res.val += argRes.val;\n            if (arg !== this.arguments[this.arguments.length - 1]) {\n                res.val += ',';\n                if (!config.minify) {\n                    res.val += ' ';\n                }\n            }\n        }\n        res.val += ')';\n        return res;\n    }\n    compilePy(config) {\n        const res = new compileResult;\n        const funcRes = res.register(this.to, config);\n        if (res.error)\n            return res;\n        res.val = funcRes + '(';\n        for (let arg of this.arguments) {\n            const argRes = res.register(arg, config);\n            if (res.error)\n                return res;\n            res.val += argRes;\n            if (arg !== this.arguments[this.arguments.length - 1]) {\n                res.val += ',';\n                if (!config.minify) {\n                    res.val += ' ';\n                }\n            }\n        }\n        res.val += ')';\n        return res;\n    }\n}\nexport class N_functionDefinition extends Node {\n    constructor(pos, body, argNames, returnType, name = '(anon)', this_ = new ESObject(), description = '') {\n        super(pos);\n        this.arguments = argNames;\n        this.body = body;\n        this.name = name;\n        this.this_ = this_;\n        this.returnType = returnType;\n        this.description = description;\n    }\n    interpret_(context) {\n        let args = [];\n        for (let arg of this.arguments) {\n            const res = interpretArgument(arg, context);\n            if (res instanceof ESError)\n                return res;\n            args.push(res);\n        }\n        const returnTypeRes = this.returnType.interpret(context);\n        if (returnTypeRes.error)\n            return returnTypeRes.error;\n        return new interpretResult(new ESFunction(this.body, args, this.name, this.this_, returnTypeRes.val, context));\n    }\n    compileJS(config) {\n        const res = new compileResult('function(');\n        for (let param of this.arguments) {\n            res.val += param.name + ',';\n            if (!config.minify) {\n                res.val += ' ';\n            }\n        }\n        if (config.minify) {\n            res.val += '){';\n        }\n        else {\n            res.val += ') {\\n';\n        }\n        const indent = ' '.repeat(config.indent);\n        config.indent += 4;\n        const bodyRes = this.body.compileJS(config);\n        if (bodyRes.error)\n            return bodyRes;\n        res.val += `${bodyRes.val}\\n${indent}}`;\n        return res;\n    }\n    compilePy(config) {\n        const res = new compileResult;\n        const hoistedName = generateRandomSymbol(config.symbols);\n        res.hoisted = `def ${hoistedName}(`;\n        for (let param of this.arguments) {\n            res.hoisted += param.name + ',';\n            if (!config.minify) {\n                res.hoisted += ' ';\n            }\n        }\n        const indent = ' '.repeat(config.indent);\n        config.indent += 4;\n        const body = this.body.compilePy(config);\n        if (body.error)\n            return body;\n        res.hoisted += `):\\n${indent}${body.val}`;\n        res.hoisted = body.hoisted + res.hoisted;\n        res.val = hoistedName;\n        return res;\n    }\n}\nexport class N_return extends Node {\n    constructor(pos, value) {\n        super(pos);\n        this.value = value;\n    }\n    interpret_(context) {\n        const res = new interpretResult();\n        if (this.value === undefined) {\n            res.funcReturn = new ESUndefined();\n            return res;\n        }\n        let val = this.value.interpret(context);\n        if (val.error)\n            return val.error;\n        res.funcReturn = val.val;\n        return res;\n    }\n    compileJS(config) {\n        var _a;\n        const valRes = (_a = this.value) === null || _a === void 0 ? void 0 : _a.compileJS(config);\n        if (valRes === null || valRes === void 0 ? void 0 : valRes.error)\n            return valRes;\n        return new compileResult(`return(${valRes === null || valRes === void 0 ? void 0 : valRes.val})`);\n    }\n    compilePy(config) {\n        const res = new compileResult;\n        if (!this.value) {\n            return new compileResult('return');\n        }\n        const valRes = res.register(this.value, config);\n        if (res.error)\n            return res;\n        return new compileResult(`return ${valRes}`);\n    }\n}\nexport class N_yield extends Node {\n    constructor(pos, value) {\n        super(pos);\n        this.value = value;\n    }\n    interpret_(context) {\n        var _a;\n        const res = new interpretResult();\n        if (this.value === undefined) {\n            res.funcReturn = new ESUndefined();\n            return res;\n        }\n        let val = this.value.interpret(context);\n        if (val.error)\n            return val.error;\n        if ((_a = val.val) === null || _a === void 0 ? void 0 : _a.bool().valueOf()) {\n            res.funcReturn = val.val;\n        }\n        return res;\n    }\n    compileJS(config) {\n        var _a;\n        const valRes = (_a = this.value) === null || _a === void 0 ? void 0 : _a.compileJS(config);\n        if (!valRes || !valRes.val) {\n            return new compileResult('');\n        }\n        return new compileResult(`if(_=${valRes.val}){return(_))`);\n    }\n    compilePy(config) {\n        if (!this.value) {\n            return new compileResult('');\n        }\n        const res = new compileResult;\n        const valRes = res.register(this.value, config);\n        if (!valRes) {\n            return new compileResult('');\n        }\n        return new compileResult(`if _ := ${valRes}: return _`);\n    }\n}\nexport class N_indexed extends Node {\n    constructor(pos, base, index) {\n        super(pos);\n        this.base = base;\n        this.index = index;\n    }\n    interpret_(context) {\n        var _a;\n        let baseRes = this.base.interpret(context);\n        if (baseRes.error)\n            return baseRes;\n        let indexRes = this.index.interpret(context);\n        if (indexRes.error)\n            return indexRes;\n        const index = indexRes.val;\n        const base = baseRes.val;\n        if (!base || !index) {\n            return new interpretResult(new ESUndefined());\n        }\n        if (this.value !== undefined) {\n            let valRes = this.value.interpret(context);\n            if (valRes.error)\n                return valRes;\n            const currentVal = wrap(base.__get_property__({ context }, index));\n            let newVal;\n            let assignVal = valRes.val;\n            (_a = this.assignType) !== null && _a !== void 0 ? _a : (this.assignType = '=');\n            if (!assignVal) {\n                return new TypeError(this.pos, '~undefined', 'undefined', 'undefined', 'N_indexed.interpret_');\n            }\n            switch (this.assignType[0]) {\n                case '*':\n                    newVal = currentVal.__multiply__({ context }, assignVal);\n                    break;\n                case '/':\n                    newVal = currentVal.__divide__({ context }, assignVal);\n                    break;\n                case '+':\n                    newVal = currentVal.__add__({ context }, assignVal);\n                    break;\n                case '-':\n                    newVal = currentVal.__subtract__({ context }, assignVal);\n                    break;\n                case '=':\n                    newVal = assignVal;\n                    break;\n                default:\n                    return new ESError(this.pos, 'AssignError', `Cannot find assignType of ${this.assignType[0]}`);\n            }\n            if (newVal instanceof ESError)\n                return newVal;\n            if (!base.__set_property__)\n                return new TypeError(this.pos, 'mutable', 'immutable', base.valueOf());\n            const res = base.__set_property__({ context }, index, newVal !== null && newVal !== void 0 ? newVal : new ESUndefined());\n            if (res instanceof ESError)\n                return res;\n        }\n        return new interpretResult(base.__get_property__({ context }, index));\n    }\n    compileJS(config) {\n        const objectRes = this.base.compileJS(config);\n        if (objectRes.error)\n            return objectRes;\n        const keyRes = this.index.compileJS(config);\n        if (keyRes.error)\n            return keyRes;\n        if (!this.value) {\n            return new compileResult(`${objectRes.val}[${keyRes.val}]`);\n        }\n        const valRes = this.value.compileJS(config);\n        if (valRes.error)\n            return valRes;\n        return new compileResult(`${objectRes.val}[${keyRes.val}]${this.assignType || '='}${valRes.val}`);\n    }\n    compilePy(config) {\n        const res = new compileResult;\n        const objectRes = res.register(this.base, config);\n        if (res.error)\n            return res;\n        const keyRes = res.register(this.index, config);\n        if (res.error)\n            return res;\n        if (!this.value) {\n            res.val = `${objectRes}[${keyRes}]`;\n            return res;\n        }\n        const valRes = res.register(this.value, config);\n        if (res.error)\n            return res;\n        res.val = `${objectRes}[${keyRes}] ${this.assignType || '='} ${valRes}`;\n        return res;\n    }\n}\nexport class N_class extends Node {\n    constructor(pos, methods, extends_, init, name = '<anon class>') {\n        super(pos);\n        this.init = init;\n        this.methods = methods;\n        this.name = name;\n        this.extends_ = extends_;\n    }\n    interpret_(context) {\n        var _a, _b, _c;\n        const methods = [];\n        for (let method of this.methods) {\n            const res = method.interpret(context);\n            if (res.error) {\n                return res.error;\n            }\n            if (!(res.val instanceof ESFunction)) {\n                return new TypeError(this.pos, 'Function', ((_a = res.val) === null || _a === void 0 ? void 0 : _a.typeName().valueOf()) || 'undefined', 'method on ' + this.name);\n            }\n            methods.push(res.val);\n        }\n        let extends_ = types.object;\n        if (this.extends_) {\n            const extendsRes = this.extends_.interpret(context);\n            if (extendsRes.error) {\n                return extendsRes.error;\n            }\n            if (!(extendsRes.val instanceof ESType)) {\n                return new TypeError(this.pos, 'Type', ((_b = extendsRes.val) === null || _b === void 0 ? void 0 : _b.typeName().valueOf()) || 'undefined', 'method on ' + this.name);\n            }\n            extends_ = extendsRes.val;\n        }\n        let init;\n        if (this.init) {\n            const initRes = this.init.interpret(context);\n            if (initRes.error) {\n                return initRes.error;\n            }\n            if (!(initRes.val instanceof ESFunction)) {\n                return new TypeError(this.pos, 'Function', ((_c = initRes.val) === null || _c === void 0 ? void 0 : _c.typeName().valueOf()) || 'undefined', 'method on ' + this.name);\n            }\n            init = initRes.val;\n        }\n        return new interpretResult(new ESType(false, this.name, methods, extends_, init));\n    }\n    compileJS(config) {\n        return new compileResult('function(){return{};}');\n    }\n    compilePy(config) {\n        return new compileResult(`class ${this.name}:\\n${' '.repeat(config.indent)}pass`);\n    }\n}\nexport class N_namespace extends Node {\n    constructor(pos, statements, name = '(anon)', mutable = false) {\n        super(pos);\n        this.name = name;\n        this.statements = statements;\n        this.mutable = mutable;\n    }\n    interpret_(context) {\n        const newContext = new Context();\n        newContext.parent = context;\n        const res = this.statements.interpret(newContext);\n        if (res.error)\n            return res;\n        return new interpretResult(new ESNamespace(new ESString(this.name), newContext.getSymbolTableAsDict(), this.mutable));\n    }\n    compileJS(config) {\n        const bodyRes = this.statements.compileJS(config);\n        if (bodyRes.error)\n            return bodyRes;\n        return new compileResult(`(() => {${bodyRes.val}})()`);\n    }\n    compilePy(config) {\n        const res = new compileResult;\n        const bodyRes = res.register(this.statements, config);\n        if (res.error)\n            return res;\n        res.val = `'namespace'`;\n        return res;\n    }\n}\nexport class N_tryCatch extends Node {\n    constructor(pos, body, catchBlock) {\n        super(pos, true);\n        this.body = body;\n        this.catchBlock = catchBlock;\n    }\n    interpret_(context) {\n        const res = this.body.interpret(context);\n        if (res.error) {\n            const newContext = new Context();\n            newContext.parent = context;\n            newContext.setOwn(catchBlockErrorSymbolName, new ESErrorPrimitive(res.error), {\n                isConstant: true\n            });\n            const catchRes = this.catchBlock.interpret(newContext);\n            if (catchRes.error)\n                return catchRes.error;\n        }\n        return new interpretResult();\n    }\n    compileJS(config) {\n        const bodyRes = this.body.compileJS(config);\n        if (bodyRes.error)\n            return bodyRes;\n        const catchRes = this.catchBlock.compileJS(config);\n        if (catchRes.error)\n            return catchRes;\n        return new compileResult(`try{${bodyRes.val}}catch(${catchBlockErrorSymbolName}){${catchRes.val}}`);\n    }\n    compilePy(config) {\n        const res = new compileResult;\n        const bodyRes = res.register(this.body, config);\n        if (res.error)\n            return res;\n        const catchRes = res.register(this.catchBlock, config);\n        if (res.error)\n            return res;\n        const indent = ' '.repeat(config.indent);\n        const highIndent = ' '.repeat(config.indent + 1);\n        res.val = `try:\\n${highIndent}${bodyRes}\\n${indent}except:\\n${highIndent}${catchRes}`;\n        return res;\n    }\n}\nexport class N_number extends Node {\n    constructor(pos, a) {\n        super(pos, true);\n        this.a = a;\n    }\n    interpret_(context) {\n        let val = this.a.value;\n        const res = new interpretResult();\n        res.val = new ESNumber(val);\n        return res;\n    }\n    compileJS(config) {\n        return new compileResult(this.a.value.toString());\n    }\n    compilePy(config) {\n        return new compileResult(this.a.value.toString());\n    }\n}\nexport class N_string extends Node {\n    constructor(pos, a) {\n        super(pos, true);\n        this.a = a;\n    }\n    interpret_(context) {\n        let val = this.a.value;\n        const res = new interpretResult();\n        res.val = new ESString(val);\n        return res;\n    }\n    compileJS(config) {\n        return new compileResult(`'${this.a.value}'`);\n    }\n    compilePy(config) {\n        return new compileResult(`'${this.a.value}'`);\n    }\n}\nexport class N_variable extends Node {\n    constructor(a) {\n        super(a.pos, true);\n        this.a = a;\n    }\n    interpret_(context) {\n        if (!context.has(this.a.value)) {\n            return new ReferenceError(this.a.pos, this.a.value);\n        }\n        let res = new interpretResult();\n        let symbol = context.getSymbol(this.a.value);\n        if (!symbol) {\n            return new ReferenceError(this.pos, `No access to undeclared variable ${this.a.value}`);\n        }\n        if (symbol instanceof ESError) {\n            return symbol;\n        }\n        res.val = symbol.value;\n        return res;\n    }\n    compileJS(config) {\n        let val = this.a.value.toString();\n        if (val === 'import') {\n            val = 'import_';\n        }\n        return new compileResult(val);\n    }\n    compilePy(config) {\n        let val = this.a.value.toString();\n        if (val === 'import') {\n            val = 'import_';\n        }\n        return new compileResult(val);\n    }\n}\nexport class N_undefined extends Node {\n    constructor(pos = Position.void) {\n        super(pos, true);\n    }\n    interpret_(context) {\n        const res = new interpretResult();\n        res.val = new ESUndefined();\n        return res;\n    }\n    compileJS(config) {\n        return new compileResult('undefined');\n    }\n    compilePy(config) {\n        return new compileResult('None');\n    }\n}\nexport class N_break extends Node {\n    constructor(pos) {\n        super(pos, true);\n    }\n    interpret_(context) {\n        const res = new interpretResult();\n        res.shouldBreak = true;\n        return res;\n    }\n    compileJS(config) {\n        return new compileResult('break');\n    }\n    compilePy(config) {\n        return new compileResult('break');\n    }\n}\nexport class N_continue extends Node {\n    constructor(pos) {\n        super(pos, true);\n    }\n    interpret_(context) {\n        const res = new interpretResult();\n        res.shouldContinue = true;\n        return res;\n    }\n    compileJS(config) {\n        return new compileResult('continue');\n    }\n    compilePy(config) {\n        return new compileResult('continue');\n    }\n}\nexport class N_primitiveWrapper extends Node {\n    constructor(val, pos = Position.void) {\n        super(pos, true);\n        this.value = val;\n    }\n    interpret_(context) {\n        return new interpretResult(this.value);\n    }\n    compileJS(config) {\n        return new compileResult(JSON.stringify(this.value.valueOf()));\n    }\n    compilePy(config) {\n        return new compileResult(JSON.stringify(this.value.valueOf()));\n    }\n}\n","import { Node } from \"../runtime/nodes\";\nimport { ESPrimitive } from '../runtime/primitiveTypes';\nexport function deepClone(obj, hash = new WeakMap()) {\n    let result;\n    if (Object(obj) !== obj || obj instanceof Function) {\n        return obj;\n    }\n    if (hash.has(obj)) {\n        return hash.get(obj);\n    }\n    try {\n        result = new obj.constructor();\n    }\n    catch (e) {\n        result = Object.create(Object.getPrototypeOf(obj));\n    }\n    if (obj instanceof Map) {\n        Array.from(obj, ([key, val]) => result.set(deepClone(key, hash), deepClone(val, hash)));\n    }\n    else if (obj instanceof Set) {\n        Array.from(obj, (key) => result.add(deepClone(key, hash)));\n    }\n    hash.set(obj, result);\n    return Object.assign(result, ...Object.keys(obj).map(key => ({ [key]: deepClone(obj[key], hash) })));\n}\nexport function str(val, depth = 0) {\n    if (typeof val === 'string') {\n        if (depth > 0) {\n            return `'${val}'`;\n        }\n        return val;\n    }\n    if (depth > 20) {\n        return '...';\n    }\n    let result = '';\n    if (typeof val === 'undefined') {\n        return 'undefined';\n    }\n    if (val instanceof ESPrimitive) {\n        return val.str().valueOf();\n    }\n    if (val instanceof Node) {\n        return `<RunTimeNode: ${val.constructor.name}>`;\n    }\n    switch (typeof val) {\n        case 'object':\n            if (Array.isArray(val)) {\n                result += '[';\n                for (let item of val) {\n                    try {\n                        result += str(item, depth + 1) + `, `;\n                    }\n                    catch (e) {\n                        result += '<large property>, ';\n                    }\n                }\n                if (val.length) {\n                    result = result.substring(0, result.length - 2);\n                }\n                result += ']';\n            }\n            else {\n                try {\n                    result += val.constructor.name;\n                }\n                catch (e) {\n                    result += 'UNKNOWN_CONSTRUCTOR';\n                }\n                result += ': {\\n';\n                let i = 0;\n                for (let item in val) {\n                    i++;\n                    if (!val.hasOwnProperty || !val.hasOwnProperty(item)) {\n                        continue;\n                    }\n                    result += `  ${item}: ${str(val[item], depth + 1) || ''}, \\n`;\n                }\n                if (i > 0) {\n                    result = result.substring(0, result.length - 3);\n                }\n                result += '\\n}\\n';\n            }\n            break;\n        case 'string':\n            result = `'${val}'`;\n            break;\n        case \"bigint\":\n        case \"number\":\n        case \"boolean\":\n            result = `${val}`;\n            break;\n        case \"undefined\":\n            result = '<NativeUndefined>';\n            break;\n        case \"function\":\n            result = `<NativeFunction ${val.name}>`;\n            break;\n    }\n    for (let i = 0; i < depth; i++) {\n        result = indent(result);\n    }\n    return result;\n}\nexport const sleep = (ms) => new Promise(resolve => setTimeout(() => resolve(), ms));\nexport function indent(str) {\n    return str.replace(/\\n/g, '\\n    ');\n}\nexport function generateRandomSymbol(symbols, length = 10) {\n    const characters = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_';\n    const gen = () => {\n        let result = '';\n        for (let i = 0; i < length; i++) {\n            result += characters.charAt(Math.floor(Math.random() * characters.length));\n        }\n        return result;\n    };\n    let symbol = gen();\n    while (symbols.indexOf(symbol) !== -1) {\n        symbol = gen();\n    }\n    return symbol;\n}\n","import { IS_NODE_INSTANCE } from './constants';\nimport { Position } from \"./position\";\nimport { str } from \"./util/util\";\nimport chalk from \"./util/colours\";\nexport class ESError {\n    constructor(pos, name, details) {\n        this.traceback = [];\n        this.pos = pos;\n        this.name = name;\n        this.details = details;\n    }\n    get colouredStr() {\n        let out = '';\n        if (this.traceback.length) {\n            out = chalk.yellow('Error Traceback (most recent call last):\\n');\n            for (let pos of [...this.traceback].reverse())\n                out += `    ${chalk.cyan(pos.position.str)}:\\n        ${pos.line}\\n`;\n        }\n        out += `${chalk.red(this.name)}: ${this.details} \\n at ${chalk.cyan(this.pos.str)}`;\n        return out;\n    }\n    get str() {\n        return `${this.name}: ${this.details} \\n at ${this.pos.str}`;\n    }\n}\nexport class IllegalCharError extends ESError {\n    constructor(pos, char) {\n        super(pos, 'IllegalCharError', `'${char}'`);\n    }\n}\nexport class InvalidSyntaxError extends ESError {\n    constructor(pos, details) {\n        super(pos, 'InvalidSyntaxError', details);\n    }\n}\nexport class ExpectedCharError extends ESError {\n    constructor(pos, char) {\n        super(pos, 'ExpectedCharError', `'${char}'`);\n    }\n}\nexport class TypeError extends ESError {\n    constructor(pos, expectedType, actualType, value = '', detail = '') {\n        super(pos, 'TypeError', `Expected type '${expectedType}', got type '${actualType}' ${typeof value === 'undefined' ? '' : ` on value '${str(value)}'`} ${!detail ? '' : detail}`);\n    }\n}\nexport class ImportError extends ESError {\n    constructor(pos, url, detail = '') {\n        super(pos, 'ImportError', `Could not import ${url}: ${detail}`);\n    }\n}\nexport class ReferenceError extends ESError {\n    constructor(pos, ref) {\n        super(pos, 'ReferenceError', `${ref} is not defined`);\n    }\n}\nexport class IndexError extends ESError {\n    constructor(pos, ref, object) {\n        var _a;\n        super(pos, 'IndexError', `'${ref}' is not a property of '${((_a = object === null || object === void 0 ? void 0 : object.info) === null || _a === void 0 ? void 0 : _a.name) || str(object)}'`);\n    }\n}\nexport class InvalidOperationError extends ESError {\n    constructor(op, value, detail = '', pos = Position.void) {\n        var _a;\n        super(pos, 'TypeError', `Cannot perform '${op}' on value ${((_a = value === null || value === void 0 ? void 0 : value.info) === null || _a === void 0 ? void 0 : _a.name) || str(value)}: ${detail}`);\n    }\n}\nexport class InvalidRuntimeError extends ESError {\n    constructor() {\n        super(Position.void, 'InvalidRuntimeError', `Required runtime of ${IS_NODE_INSTANCE ? 'browser' : 'node'}`);\n    }\n}\nexport class TestFailed extends ESError {\n    constructor(detail) {\n        super(Position.void, 'TestFailed', detail);\n    }\n}\nexport class PermissionRequiredError extends ESError {\n    constructor(detail) {\n        super(Position.void, 'PermissionRequiredError', detail);\n    }\n}\n","export class Token {\n    constructor(pos, type, value) {\n        this.type = type;\n        this.value = value;\n        this.pos = pos;\n    }\n    matches(type, val) {\n        return this.type === type && this.value === val;\n    }\n}\n","import { Position } from \"../position\";\nimport { digits, doubleCharTokens, identifierChars, KEYWORDS, multiLineCommentEnd, multiLineCommentStart, singleCharTokens, singleLineComment, stringSurrounds, tripleCharTokens, tt, } from '../constants';\nimport { IllegalCharError } from \"../errors\";\nimport { Token } from \"./tokens\";\nexport class Lexer {\n    constructor(program, fileName) {\n        this.text = program;\n        this.position = new Position(-1, 0, -1, fileName);\n        this.advance();\n    }\n    advance() {\n        this.position.advance(this.currentChar);\n        this.currentChar = this.text[this.position.idx];\n    }\n    generate() {\n        if (!this.text) {\n            return [new Token(this.position, tt.EOF, undefined)];\n        }\n        const tokens = [];\n        while (this.currentChar !== undefined) {\n            if (' \\t\\n'.includes(this.currentChar)) {\n                this.advance();\n            }\n            else if (digits.includes(this.currentChar)) {\n                tokens.push(this.makeNumber());\n            }\n            else if (this.currentChar === singleLineComment[0] &&\n                this.text[this.position.idx + 1] === singleLineComment[1]) {\n                this.singleLineComment();\n            }\n            else if (this.currentChar === multiLineCommentStart[0] &&\n                this.text[this.position.idx + 1] === multiLineCommentStart[1]) {\n                this.multiLineComment();\n            }\n            else if (identifierChars.includes(this.currentChar)) {\n                tokens.push(this.makeIdentifier());\n            }\n            else if (stringSurrounds.indexOf(this.currentChar) !== -1) {\n                tokens.push(this.makeString());\n            }\n            else {\n                const possibleAssignFirstChar = this.currentChar;\n                let token = this.unknownChar();\n                if (token) {\n                    if (token.type === tt.ASSIGN) {\n                        token.value = possibleAssignFirstChar;\n                    }\n                    tokens.push(token);\n                }\n                else {\n                    let pos = this.position.clone;\n                    let char = this.currentChar;\n                    this.advance();\n                    return new IllegalCharError(pos, char);\n                }\n            }\n        }\n        tokens.push(new Token(this.position, tt.EOF, undefined));\n        return tokens;\n    }\n    makeNumber() {\n        const pos = this.position.clone;\n        let numStr = '';\n        let dotCount = 0;\n        while (this.currentChar !== undefined && (digits + '._').includes(this.currentChar)) {\n            if (this.currentChar === '.') {\n                if (dotCount === 1) {\n                    break;\n                }\n                dotCount++;\n                numStr += '.';\n            }\n            else if (this.currentChar !== '_') {\n                numStr += this.currentChar;\n            }\n            this.advance();\n        }\n        return new Token(pos, tt.NUMBER, parseFloat(numStr));\n    }\n    makeString() {\n        const pos = this.position.clone;\n        let str = '';\n        let strClose = this.currentChar;\n        this.advance();\n        while (this.currentChar !== strClose && this.currentChar !== undefined) {\n            if (this.currentChar === '\\\\') {\n                this.advance();\n                if (this.currentChar === 'n') {\n                    str += '\\n';\n                    this.advance();\n                    continue;\n                }\n            }\n            str += this.currentChar;\n            this.advance();\n        }\n        this.advance();\n        return new Token(pos, tt.STRING, str);\n    }\n    makeIdentifier() {\n        let idStr = '';\n        const posStart = this.position.clone;\n        while (this.currentChar !== undefined && (identifierChars + digits).includes(this.currentChar)) {\n            idStr += this.currentChar;\n            this.advance();\n        }\n        let tokType = tt.IDENTIFIER;\n        if (KEYWORDS.indexOf(idStr) !== -1) {\n            tokType = tt.KEYWORD;\n        }\n        return new Token(posStart, tokType, idStr);\n    }\n    unknownChar() {\n        if (this.currentChar === undefined) {\n            return undefined;\n        }\n        for (let triple in tripleCharTokens) {\n            if (triple[0] === this.currentChar)\n                if (triple[1] === this.text[this.position.idx + 1])\n                    if (triple[2] === this.text[this.position.idx + 2]) {\n                        const pos = this.position.clone;\n                        this.advance();\n                        this.advance();\n                        this.advance();\n                        return new Token(pos, tripleCharTokens[triple], undefined);\n                    }\n        }\n        for (let double in doubleCharTokens) {\n            if (double[0] === this.currentChar)\n                if (double[1] === this.text[this.position.idx + 1]) {\n                    const pos = this.position.clone;\n                    this.advance();\n                    this.advance();\n                    return new Token(pos, doubleCharTokens[double], undefined);\n                }\n        }\n        if (singleCharTokens.hasOwnProperty(this.currentChar)) {\n            let pos = this.position.clone;\n            let val = singleCharTokens[this.currentChar];\n            this.advance();\n            return new Token(pos, val, undefined);\n        }\n        return undefined;\n    }\n    singleLineComment() {\n        this.advance();\n        while (this.currentChar !== '\\n' && this.currentChar !== undefined) {\n            this.advance();\n        }\n        this.advance();\n    }\n    multiLineComment() {\n        this.advance();\n        while (!(this.currentChar === multiLineCommentEnd[0] &&\n            this.text[this.position.idx + 1] === multiLineCommentEnd[1])) {\n            this.advance();\n        }\n        this.advance();\n        this.advance();\n    }\n}\n","import { tokenType, tokenTypeString, tt, types, VAR_DECLARE_KEYWORDS } from '../constants';\nimport { Token } from \"./tokens\";\nimport * as n from '../runtime/nodes';\nimport { N_functionDefinition, N_namespace, N_primitiveWrapper, N_tryCatch, N_undefined, N_variable, } from '../runtime/nodes';\nimport { ESError, InvalidSyntaxError } from \"../errors\";\nexport class ParseResults {\n    constructor() {\n        this.advanceCount = 0;\n        this.lastRegisteredAdvanceCount = 0;\n        this.reverseCount = 0;\n    }\n    registerAdvance() {\n        this.advanceCount = 1;\n        this.lastRegisteredAdvanceCount++;\n    }\n    register(res) {\n        this.lastRegisteredAdvanceCount = res.advanceCount;\n        this.advanceCount += res.advanceCount;\n        if (res.error) {\n            this.error = res.error;\n        }\n        if (!res.node) {\n            return new N_undefined();\n        }\n        return res.node;\n    }\n    tryRegister(res) {\n        if (res.error) {\n            this.reverseCount += res.advanceCount;\n            return;\n        }\n        return this.register(res);\n    }\n    success(node) {\n        this.node = node;\n        return this;\n    }\n    failure(error) {\n        this.error = error;\n        return this;\n    }\n}\nexport class Parser {\n    constructor(tokens) {\n        this.tokens = tokens;\n        this.tokenIdx = -1;\n        this.currentToken = tokens[0];\n        this.advance();\n    }\n    parse() {\n        var _a;\n        if (!this.currentToken || !this.tokens || (this.tokens.length === 1 && this.tokens[0].type === tt.EOF)) {\n            return new ParseResults();\n        }\n        const res = this.statements(true);\n        if (!res.error && this.currentToken.type !== tokenType.EOF) {\n            return res.failure(new InvalidSyntaxError((_a = this.currentToken) === null || _a === void 0 ? void 0 : _a.pos, `Expected 'End of File', got token of type '${tokenTypeString[this.currentToken.type]}'`));\n        }\n        return res;\n    }\n    advance(res) {\n        if (res)\n            res.registerAdvance();\n        this.tokenIdx++;\n        this.currentToken = this.tokens[this.tokenIdx];\n        return this.currentToken;\n    }\n    reverse(amount = 1) {\n        this.tokenIdx -= amount;\n        this.currentToken = this.tokens[this.tokenIdx];\n        return this.currentToken;\n    }\n    consume(res, type, errorMsg) {\n        if (this.currentToken.type !== type)\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, errorMsg !== null && errorMsg !== void 0 ? errorMsg : `Expected '${tokenTypeString[type]}' but got '${tokenTypeString[this.currentToken.type]}'`));\n        this.advance(res);\n    }\n    clearEndStatements(res) {\n        while (this.currentToken.type === tt.ENDSTATEMENT) {\n            this.advance(res);\n        }\n    }\n    statements(topLevel = false) {\n        const res = new ParseResults();\n        const pos = this.currentToken.pos;\n        let statements = [];\n        this.clearEndStatements(res);\n        const firstStatement = res.register(this.statement());\n        if (!firstStatement) {\n            return res;\n        }\n        statements.push(firstStatement);\n        if (res.error) {\n            return res;\n        }\n        let moreStatements = true;\n        while (true) {\n            let newLineCount = 0;\n            while (this.currentToken.type === tt.ENDSTATEMENT) {\n                this.advance(res);\n                newLineCount++;\n            }\n            if (newLineCount === 0) {\n                moreStatements = false;\n            }\n            if (!moreStatements) {\n                break;\n            }\n            const statement = res.tryRegister(this.statement());\n            if (!statement) {\n                this.reverse(res.reverseCount);\n                continue;\n            }\n            statements.push(statement);\n        }\n        this.clearEndStatements(res);\n        let node = new n.N_statements(pos, statements, topLevel);\n        return res.success(node);\n    }\n    statement() {\n        const res = new ParseResults();\n        const pos = this.currentToken.pos;\n        if (this.currentToken.matches(tt.KEYWORD, 'return')) {\n            return this.returnStatement(res);\n        }\n        else if (this.currentToken.matches(tt.KEYWORD, 'yield')) {\n            return this.returnStatement(res, true);\n        }\n        else if (this.currentToken.matches(tt.KEYWORD, 'break')) {\n            this.advance(res);\n            return res.success(new n.N_break(pos));\n        }\n        else if (this.currentToken.matches(tt.KEYWORD, 'continue')) {\n            this.advance(res);\n            return res.success(new n.N_continue(pos));\n        }\n        else if (this.currentToken.matches(tt.KEYWORD, 'try')) {\n            return this.tryCatch();\n        }\n        const expr = res.register(this.expr());\n        if (res.error) {\n            return res;\n        }\n        return res.success(expr);\n    }\n    returnStatement(res, isYield = false) {\n        const pos = this.currentToken.pos;\n        this.advance(res);\n        let expr = new N_undefined(this.currentToken.pos);\n        if (this.currentToken.type !== tt.ENDSTATEMENT) {\n            let exprRes = res.register(this.expr());\n            if (!exprRes) {\n                return res.failure(new InvalidSyntaxError(this.currentToken.pos, 'Expected end of statement'));\n            }\n            expr = exprRes;\n        }\n        if (isYield) {\n            return res.success(new n.N_yield(pos, expr));\n        }\n        return res.success(new n.N_return(pos, expr));\n    }\n    atom() {\n        const res = new ParseResults();\n        const tok = this.currentToken;\n        const pos = this.currentToken.pos;\n        switch (tok.type) {\n            case tt.NUMBER:\n                this.advance(res);\n                return res.success(new n.N_number(pos, tok));\n            case tt.STRING:\n                this.advance(res);\n                return res.success(new n.N_string(pos, tok));\n            case tt.IDENTIFIER:\n                return this.atomIdentifier(res, pos, tok);\n            case tt.OPAREN:\n                this.advance(res);\n                const expr = res.register(this.expr());\n                if (res.error)\n                    return res;\n                if (this.currentToken.type === tt.CPAREN) {\n                    this.advance(res);\n                    return res.success(expr);\n                }\n                return res.failure(new InvalidSyntaxError(this.currentToken.pos, \"Expected ')'\"));\n            case tt.OSQUARE:\n                let arrayExpr = res.register(this.array());\n                if (res.error)\n                    return res;\n                return res.success(arrayExpr);\n            case tt.OBRACES:\n                let objectExpr = res.register(this.object());\n                if (res.error)\n                    return res;\n                return res.success(objectExpr);\n            case tt.KEYWORD:\n                if (tok.value === 'if') {\n                    const expr = res.register(this.ifExpr());\n                    if (res.error)\n                        return res;\n                    return res.success(expr);\n                }\n                return res.failure(new InvalidSyntaxError(this.currentToken.pos, `Invalid Identifier ${tok.value}`));\n            default:\n                return res.failure(new InvalidSyntaxError(this.currentToken.pos, `Expected number, identifier, '(', '+' or '-'`));\n        }\n    }\n    atomIdentifier(res, pos, tok) {\n        this.advance(res);\n        let node = new n.N_variable(tok);\n        let prevNode = new n.N_undefined(pos);\n        let functionCall = false;\n        while ([tt.OPAREN, tt.OSQUARE, tt.DOT].indexOf(this.currentToken.type) !== -1) {\n            switch (this.currentToken.type) {\n                case tt.OPAREN:\n                    functionCall = true;\n                    const tempNode = node;\n                    node = res.register(this.makeFunctionCall(node));\n                    prevNode = tempNode;\n                    if (res.error)\n                        return res;\n                    break;\n                case tt.OSQUARE:\n                    prevNode = node;\n                    node = res.register(this.makeIndex(node));\n                    if (res.error)\n                        return res;\n                    break;\n                case tt.DOT:\n                    this.advance(res);\n                    if (this.currentToken.type !== tt.IDENTIFIER) {\n                        return res.failure(new InvalidSyntaxError(this.currentToken.pos, `Expected identifier after '.'`));\n                    }\n                    prevNode = node;\n                    node = new n.N_indexed(this.currentToken.pos, node, new n.N_string(this.currentToken.pos, this.currentToken));\n                    this.advance(res);\n            }\n        }\n        if (this.currentToken.type === tt.ASSIGN) {\n            let assignType = this.currentToken.value;\n            if (functionCall) {\n                return res.failure(new InvalidSyntaxError(pos, `Cannot assign to return value of function`));\n            }\n            this.advance(res);\n            const value = res.register(this.expr());\n            if (node instanceof n.N_variable) {\n                node = new n.N_varAssign(pos, node.a, value, assignType, false);\n            }\n            else if (node instanceof n.N_indexed) {\n                node.value = value;\n                node.assignType = assignType;\n            }\n            else {\n                return res.failure(new InvalidSyntaxError(pos, `Cannot have node of type ${this.currentToken.constructor.name}.\n                            Expected either index or variable node.`));\n            }\n            if (res.error)\n                return res;\n        }\n        return res.success(node);\n    }\n    power() {\n        return this.binOp(() => this.atom(), [tt.POW, tt.MOD, tt.APMERSAND, tt.PIPE], () => this.factor());\n    }\n    factor() {\n        const res = new ParseResults();\n        const tok = this.currentToken;\n        if (tok.type === tt.ADD || tok.type === tt.SUB || tok.type === tt.BITWISE_NOT || tok.type === tt.QM) {\n            this.advance(res);\n            const factor = res.register(this.factor());\n            if (res.error)\n                return res;\n            return res.success(new n.N_unaryOp(tok.pos, factor, tok));\n        }\n        return this.power();\n    }\n    term() {\n        return this.binOp(() => this.factor(), [tt.MUL, tt.DIV]);\n    }\n    arithmeticExpr() {\n        return this.binOp(() => this.term(), [tt.ADD, tt.SUB]);\n    }\n    comparisonExpr() {\n        const res = new ParseResults();\n        if (this.currentToken.type === tt.NOT) {\n            const opTok = this.currentToken;\n            this.advance(res);\n            let node = res.register(this.expr());\n            if (res.error)\n                return res;\n            return res.success(new n.N_unaryOp(opTok.pos, node, opTok));\n        }\n        if (this.currentToken.type === tt.BITWISE_NOT) {\n            const opTok = this.currentToken;\n            this.advance(res);\n            let node = res.register(this.expr());\n            if (res.error)\n                return res;\n            return res.success(new n.N_unaryOp(opTok.pos, node, opTok));\n        }\n        let node = res.register(this.binOp(() => this.arithmeticExpr(), [tt.EQUALS, tt.NOTEQUALS, tt.GT, tt.GTE, tt.LTE, tt.LT]));\n        if (res.error)\n            return res;\n        return res.success(node);\n    }\n    expr() {\n        const res = new ParseResults();\n        this.clearEndStatements(res);\n        if (this.currentToken.type === tt.KEYWORD && VAR_DECLARE_KEYWORDS.indexOf(this.currentToken.value) !== -1) {\n            return this.initiateVar(res);\n        }\n        else if (this.currentToken.matches(tokenType.KEYWORD, 'if')) {\n            return this.ifExpr();\n        }\n        else if (this.currentToken.matches(tokenType.KEYWORD, 'while')) {\n            return this.whileExpr();\n        }\n        else if (this.currentToken.matches(tokenType.KEYWORD, 'for')) {\n            return this.forExpr();\n        }\n        else if (this.currentToken.matches(tokenType.KEYWORD, 'func')) {\n            return this.funcExpr();\n        }\n        else if (this.currentToken.matches(tokenType.KEYWORD, 'class')) {\n            return this.classExpr();\n        }\n        else if (this.currentToken.matches(tokenType.KEYWORD, 'namespace')) {\n            return this.namespace();\n        }\n        let node = res.register(this.binOp(() => this.comparisonExpr(), [tt.AND, tt.OR]));\n        if (res.error)\n            return res;\n        return res.success(node);\n    }\n    binOp(func, ops, funcB = func) {\n        const res = new ParseResults();\n        let left = res.register(func());\n        if (res.error)\n            return res;\n        while (ops.indexOf(this.currentToken.type) !== -1\n            || ops.indexOf([this.currentToken.type, this.currentToken.value]) !== -1) {\n            const opTok = this.currentToken;\n            this.advance(res);\n            const right = res.register(funcB());\n            if (res.error)\n                return res;\n            left = new n.N_binOp(left.pos, left, opTok, right);\n        }\n        return res.success(left);\n    }\n    makeFunctionCall(to) {\n        const res = new ParseResults();\n        let args = [];\n        const pos = this.currentToken.pos;\n        if (this.currentToken.type !== tt.OPAREN) {\n            return res.failure(new InvalidSyntaxError(pos, \"Expected '['\"));\n        }\n        this.advance(res);\n        if (this.currentToken.type === tt.CPAREN) {\n            this.advance(res);\n            return res.success(new n.N_functionCall(pos, to, []));\n        }\n        args.push(res.register(this.expr()));\n        if (res.error)\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, \"Invalid argument\"));\n        while (this.currentToken.type === tt.COMMA) {\n            this.advance(res);\n            args.push(res.register(this.expr()));\n            if (res.error)\n                return res;\n        }\n        if (this.currentToken.type !== tt.CPAREN)\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, \"Expected ',' or ')'\"));\n        this.advance(res);\n        return res.success(new n.N_functionCall(pos, to, args));\n    }\n    makeIndex(to) {\n        const res = new ParseResults();\n        const pos = this.currentToken.pos;\n        const base = to;\n        if (this.currentToken.type !== tt.OSQUARE)\n            return res.failure(new InvalidSyntaxError(pos, \"Expected '[\"));\n        this.advance(res);\n        if (this.currentToken.type === tt.CSQUARE) {\n            return res.failure(new InvalidSyntaxError(pos, `Cannot index without expression`));\n        }\n        let index = res.register(this.expr());\n        if (res.error)\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, \"Invalid index\"));\n        if (this.currentToken.type !== tt.CSQUARE)\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, \"Expected ']'\"));\n        this.advance(res);\n        return res.success(new n.N_indexed(pos, base, index));\n    }\n    typeExpr(res) {\n        if (this.currentToken.type === tt.IDENTIFIER) {\n            const tok = this.currentToken;\n            this.advance(res);\n            return res.success(new N_variable(tok));\n        }\n        return this.expr();\n    }\n    initiateVar(res) {\n        let pos = this.currentToken.pos;\n        let isConst = true;\n        let isGlobal = false;\n        let isDeclaration = false;\n        if (this.currentToken.type === tt.KEYWORD &&\n            this.currentToken.value === 'let') {\n            isDeclaration = true;\n            this.advance(res);\n            if (res.error)\n                return res;\n            if (this.currentToken.type === tt.KEYWORD &&\n                this.currentToken.value === 'global') {\n                isDeclaration = true;\n                isGlobal = true;\n                this.advance(res);\n                if (res.error)\n                    return res;\n            }\n            if (this.currentToken.type === tt.KEYWORD &&\n                this.currentToken.value === 'var') {\n                isDeclaration = true;\n                isConst = false;\n                this.advance(res);\n                if (res.error)\n                    return res;\n            }\n        }\n        if (this.currentToken.type === tt.KEYWORD) {\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, `Expected variable declaration keyword, not ${this.currentToken.value}`));\n        }\n        if (this.currentToken.type !== tokenType.IDENTIFIER) {\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, `Expected Identifier or Keyword`));\n        }\n        const varName = this.currentToken;\n        this.advance(res);\n        let type = types.any;\n        if (this.currentToken.type === tt.COLON) {\n            isDeclaration = true;\n            this.consume(res, tt.COLON);\n            type = res.register(this.typeExpr(res));\n        }\n        if (this.currentToken.type !== tt.ASSIGN) {\n            if (isConst)\n                return res.failure(new InvalidSyntaxError(pos, 'Cannot initialise constant to undefined'));\n            return res.success(new n.N_varAssign(pos, varName, new n.N_undefined(this.currentToken.pos), '=', isGlobal, isConst, isDeclaration, type));\n        }\n        let assignType = this.currentToken.value;\n        this.advance(res);\n        const expr = res.register(this.expr());\n        if (res.error) {\n            return res;\n        }\n        if (expr instanceof n.N_class || expr instanceof n.N_functionDefinition) {\n            expr.name = varName.value;\n        }\n        if (expr instanceof N_namespace) {\n            expr.name = varName.value;\n            expr.mutable = !isConst;\n        }\n        return res.success(new n.N_varAssign(pos, varName, expr, assignType, isGlobal, isConst, isDeclaration, type));\n    }\n    bracesExp() {\n        const res = new ParseResults();\n        this.consume(res, tt.OBRACES);\n        if (res.error) {\n            return res;\n        }\n        this.clearEndStatements(res);\n        if (this.currentToken.type === tt.CBRACES) {\n            this.advance(res);\n            return res.success(new n.N_undefined(this.currentToken.pos));\n        }\n        const expr = res.register(this.statements());\n        if (res.error) {\n            return res;\n        }\n        this.consume(res, tt.CBRACES);\n        if (res.error) {\n            return res;\n        }\n        return res.success(expr);\n    }\n    addEndStatement(res) {\n        this.tokens.splice(this.tokenIdx, 0, new Token(this.currentToken.pos, tt.ENDSTATEMENT, undefined));\n        this.reverse();\n        this.advance(res);\n    }\n    ifExpr() {\n        const res = new ParseResults();\n        let ifTrue;\n        let ifFalse;\n        let condition;\n        const pos = this.currentToken.pos;\n        if (!this.currentToken.matches(tt.KEYWORD, 'if'))\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, \"Expected 'if'\"));\n        this.advance(res);\n        condition = res.register(this.expr());\n        if (res.error)\n            return res;\n        ifTrue = res.register(this.bracesExp());\n        if (res.error)\n            return res;\n        this.clearEndStatements(res);\n        if (this.currentToken.matches(tt.KEYWORD, 'else')) {\n            this.advance(res);\n            if (this.currentToken.type == tt.OBRACES) {\n                ifFalse = res.register(this.bracesExp());\n                if (res.error)\n                    return res;\n            }\n            else {\n                ifFalse = res.register(this.statement());\n                if (res.error)\n                    return res;\n            }\n        }\n        this.addEndStatement(res);\n        return res.success(new n.N_if(pos, condition, ifTrue, ifFalse));\n    }\n    whileExpr() {\n        const res = new ParseResults();\n        let loop;\n        let condition;\n        const pos = this.currentToken.pos;\n        if (!this.currentToken.matches(tt.KEYWORD, 'while')) {\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, \"Expected 'while'\"));\n        }\n        this.advance(res);\n        condition = res.register(this.expr());\n        if (res.error)\n            return res;\n        loop = res.register(this.bracesExp());\n        if (res.error)\n            return res;\n        this.addEndStatement(res);\n        return res.success(new n.N_while(pos, condition, loop));\n    }\n    parameter(res) {\n        let name;\n        let type = new n.N_primitiveWrapper(types.any);\n        if (this.currentToken.type !== tt.IDENTIFIER) {\n            return new InvalidSyntaxError(this.currentToken.pos, \"Expected identifier\");\n        }\n        name = this.currentToken.value;\n        this.advance(res);\n        if (this.currentToken.type === tt.COLON) {\n            this.consume(res, tt.COLON);\n            if (res.error)\n                return res.error;\n            type = res.register(this.typeExpr(res));\n            if (res.error)\n                return res.error;\n        }\n        return { name, type };\n    }\n    funcCore() {\n        const res = new ParseResults();\n        const pos = this.currentToken.pos;\n        let body, args = [], returnType = new n.N_primitiveWrapper(types.any);\n        this.consume(res, tt.OPAREN);\n        if (this.currentToken.type === tt.CPAREN) {\n            this.advance(res);\n        }\n        else {\n            let param = this.parameter(res);\n            if (param instanceof ESError) {\n                return res.failure(param);\n            }\n            args.push(param);\n            while (this.currentToken.type === tt.COMMA) {\n                this.advance(res);\n                let param = this.parameter(res);\n                if (param instanceof ESError)\n                    return res.failure(param);\n                args.push(param);\n            }\n            if (this.currentToken.type !== tt.CPAREN)\n                return res.failure(new InvalidSyntaxError(this.currentToken.pos, \"Expected ',' or ')'\"));\n            this.advance(res);\n        }\n        if (this.currentToken.type === tt.COLON) {\n            this.advance(res);\n            returnType = res.register(this.typeExpr(res));\n            if (res.error)\n                return res;\n        }\n        if (this.currentToken.type !== tt.OBRACES) {\n            body = new n.N_return(this.currentToken.pos, res.register(this.expr()));\n            if (res.error)\n                return res;\n        }\n        else {\n            this.consume(res, tt.OBRACES);\n            if (res.error)\n                return res;\n            if (this.currentToken.type !== tt.CBRACES)\n                body = res.register(this.statements());\n            else\n                body = new n.N_undefined(this.currentToken.pos);\n            this.consume(res, tt.CBRACES);\n            if (res.error)\n                return res;\n        }\n        return res.success(new n.N_functionDefinition(pos, body, args, returnType));\n    }\n    funcExpr() {\n        const res = new ParseResults();\n        if (!this.currentToken.matches(tt.KEYWORD, 'func'))\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, \"Expected 'func'\"));\n        this.advance(res);\n        const func = res.register(this.funcCore());\n        if (res.error)\n            return res;\n        return res.success(func);\n    }\n    classExpr(name) {\n        const res = new ParseResults();\n        const pos = this.currentToken.pos;\n        const methods = [];\n        let init;\n        let extends_ = new N_primitiveWrapper(types.object);\n        if (!this.currentToken.matches(tt.KEYWORD, 'class')) {\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, \"Expected 'class'\"));\n        }\n        this.advance(res);\n        if (this.currentToken.matches(tt.KEYWORD, 'extends')) {\n            this.advance(res);\n            extends_ = res.register(this.expr());\n            if (res.error)\n                return res;\n        }\n        this.consume(res, tt.OBRACES);\n        if (res.error)\n            return res;\n        if (this.currentToken.type === tt.CBRACES) {\n            this.advance(res);\n            return res.success(new n.N_class(pos, [], extends_, undefined, name));\n        }\n        while (true) {\n            if (this.currentToken.type !== tt.IDENTIFIER) {\n                break;\n            }\n            let methodId = this.currentToken.value;\n            this.advance(res);\n            const func = res.register(this.funcCore());\n            if (res.error)\n                return res;\n            if (!(func instanceof N_functionDefinition)) {\n                return res.failure(new ESError(this.currentToken.pos, 'ParseError', `Tried to get function, but got ${func} instead`));\n            }\n            func.name = methodId;\n            if (methodId === 'init') {\n                init = func;\n            }\n            else {\n                methods.push(func);\n            }\n        }\n        this.consume(res, tt.CBRACES);\n        return res.success(new n.N_class(pos, methods, extends_, init, name));\n    }\n    forExpr() {\n        const res = new ParseResults();\n        const pos = this.currentToken.pos;\n        let body, array, identifier, isConst = true;\n        if (!this.currentToken.matches(tt.KEYWORD, 'for')) {\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, \"Expected 'for'\"));\n        }\n        this.advance(res);\n        if (this.currentToken.matches(tt.KEYWORD, 'var')) {\n            isConst = false;\n            this.advance(res);\n        }\n        else if (this.currentToken.matches(tt.KEYWORD, 'let')) {\n            this.advance(res);\n        }\n        if (res.error)\n            return res;\n        if (this.currentToken.type !== tt.IDENTIFIER) {\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, \"Expected identifier\"));\n        }\n        identifier = this.currentToken;\n        this.advance(res);\n        if (!this.currentToken.matches(tt.KEYWORD, 'in')) {\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, \"Expected keyword 'in\"));\n        }\n        this.advance(res);\n        array = res.register(this.expr());\n        if (res.error)\n            return res;\n        body = res.register(this.bracesExp());\n        if (res.error)\n            return res;\n        this.addEndStatement(res);\n        if (res.error)\n            return res;\n        return res.success(new n.N_for(pos, body, array, identifier, false, isConst));\n    }\n    array() {\n        const res = new ParseResults();\n        let elements = [];\n        const pos = this.currentToken.pos;\n        if (this.currentToken.type !== tt.OSQUARE) {\n            return res.failure(new InvalidSyntaxError(pos, \"Expected '[\"));\n        }\n        this.advance(res);\n        if (this.currentToken.type === tt.CSQUARE) {\n            this.advance(res);\n            return res.success(new n.N_array(pos, []));\n        }\n        elements.push(res.register(this.expr()));\n        if (res.error) {\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, \"Unexpected token\"));\n        }\n        while (this.currentToken.type === tt.COMMA) {\n            this.advance(res);\n            elements.push(res.register(this.expr()));\n            if (res.error)\n                return res;\n        }\n        if (this.currentToken.type !== tt.CSQUARE) {\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, \"Expected ',' or ']'\"));\n        }\n        this.advance(res);\n        return res.success(new n.N_array(pos, elements));\n    }\n    object() {\n        const res = new ParseResults();\n        let properties = [];\n        const pos = this.currentToken.pos;\n        if (this.currentToken.type !== tt.OBRACES) {\n            return res.failure(new InvalidSyntaxError(pos, \"Expected '{\"));\n        }\n        this.advance(res);\n        if (this.currentToken.type === tt.CBRACES) {\n            this.advance(res);\n            return res.success(new n.N_objectLiteral(pos, []));\n        }\n        while (true) {\n            let keyType, key, value;\n            if (this.currentToken.type === tt.IDENTIFIER) {\n                keyType = 'id';\n                key = new n.N_string(this.currentToken.pos, this.currentToken);\n                this.advance(res);\n            }\n            else if (this.currentToken.type === tt.STRING) {\n                keyType = 'string';\n                key = new n.N_string(this.currentToken.pos, this.currentToken);\n                this.advance(res);\n            }\n            else if (this.currentToken.type === tt.OSQUARE) {\n                keyType = 'value';\n                this.advance(res);\n                key = res.register(this.expr());\n                if (res.error)\n                    return res;\n                if (this.currentToken.type !== tt.CSQUARE) {\n                    return res.failure(new InvalidSyntaxError(this.currentToken.pos, `Expected ']', got '${tokenTypeString[this.currentToken.type]}'`));\n                }\n                this.advance(res);\n            }\n            else {\n                break;\n            }\n            if (this.currentToken.type === tt.COLON) {\n                this.advance(res);\n                value = res.register(this.expr());\n                if (res.error)\n                    return res;\n                if (this.currentToken.type !== tt.COMMA && this.currentToken.type !== tt.CBRACES) {\n                    return res.failure(new InvalidSyntaxError(this.currentToken.pos, `Expected ',' or '}', got '${tokenTypeString[this.currentToken.type]}'`));\n                }\n                if (this.currentToken.type === tt.COMMA) {\n                    this.advance(res);\n                }\n            }\n            else {\n                if (this.currentToken.type !== tt.COMMA && this.currentToken.type !== tt.CBRACES) {\n                    return res.failure(new InvalidSyntaxError(this.currentToken.pos, `Expected ',' or '}', got '${tokenTypeString[this.currentToken.type]}'`));\n                }\n                if (keyType !== 'id') {\n                    return res.failure(new InvalidSyntaxError(this.currentToken.pos, `You must specify a value when initialising an object literal with a key that is not an identifier.\n                        Try using \\`key: value\\` syntax.`));\n                }\n                this.reverse();\n                value = new n.N_variable(this.currentToken);\n                this.advance(res);\n                if (this.currentToken.type === tt.COMMA) {\n                    this.advance(res);\n                }\n            }\n            properties.push([key, value]);\n            if (res.error)\n                return res;\n        }\n        if (this.currentToken.type !== tt.CBRACES)\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, \"Expected identifier, ',' or '}'\"));\n        this.advance(res);\n        return res.success(new n.N_objectLiteral(pos, properties));\n    }\n    namespace() {\n        const res = new ParseResults();\n        const pos = this.currentToken.pos;\n        this.consume(res, tt.KEYWORD);\n        if (res.error)\n            return res;\n        this.consume(res, tt.OBRACES);\n        if (res.error)\n            return res;\n        if (this.currentToken.type === tt.CBRACES) {\n            this.advance(res);\n            return res.success(new n.N_namespace(pos, new n.N_undefined()));\n        }\n        const statements = res.register(this.statements());\n        if (res.error)\n            return res;\n        this.consume(res, tt.CBRACES);\n        if (res.error)\n            return res;\n        return res.success(new n.N_namespace(pos, statements));\n    }\n    tryCatch() {\n        const res = new ParseResults();\n        this.consume(res, tt.KEYWORD);\n        if (res.error)\n            return res;\n        this.consume(res, tt.OBRACES);\n        if (res.error)\n            return res;\n        if (this.currentToken.type === tt.CBRACES) {\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, 'No empty try block'));\n        }\n        const body = res.register(this.statements());\n        if (res.error)\n            return res;\n        this.consume(res, tt.CBRACES);\n        if (res.error)\n            return res;\n        if (this.currentToken.value !== 'catch') {\n            return res.failure(new InvalidSyntaxError(this.currentToken.pos, 'try block requires catch'));\n        }\n        this.consume(res, tt.KEYWORD);\n        if (res.error)\n            return res;\n        this.consume(res, tt.OBRACES);\n        if (res.error)\n            return res;\n        if (this.currentToken.type === tt.CBRACES) {\n            return res.success(new N_tryCatch(this.currentToken.pos, body, new N_undefined()));\n        }\n        const catchBlock = res.register(this.statements());\n        if (res.error)\n            return res;\n        this.consume(res, tt.CBRACES);\n        if (res.error)\n            return res;\n        this.addEndStatement(res);\n        if (res.error)\n            return res;\n        return res.success(new N_tryCatch(this.currentToken.pos, body, catchBlock));\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Lexer } from \"./parse/lexer\";\nimport { Parser } from \"./parse/parser\";\nimport { global, libs as allLibs, now, refreshPerformanceNow, runningInNode, setGlobalContext, VERSION } from \"./constants\";\nimport { initialise } from \"./init\";\nimport { ESError } from \"./errors\";\nimport { Position } from \"./position\";\nimport { compileResult, interpretResult, Node } from \"./runtime/nodes\";\nimport { ESArray, initPrimitiveTypes } from \"./runtime/primitiveTypes\";\nimport { Context } from \"./runtime/context\";\nimport addNodeLibs from \"./built-in/nodeLibs\";\nimport colours from './util/colours';\nimport JS_STD_TXT_RAW from 'raw-loader!./built-in/compiledSTD/std.txt.js';\nimport PY_STD_TXT_RAW from 'raw-loader!./built-in/compiledSTD/std.txt.py';\nimport { preloadModules } from \"./built-in/builtInModules\";\nimport { config } from \"./config\";\nexport { Context, colours, Position, };\nexport * from './runtime/primitiveTypes';\nexport { VERSION, global, setGlobalContext, IS_NODE_INSTANCE, runningInNode, libs, now, refreshPerformanceNow, configFileName } from './constants';\nexport * from './errors';\nexport * from './runtime/nodes';\nexport * from './util/util';\nexport { strip, wrap } from './runtime/primitives/wrapStrip';\nexport { ESSymbol } from './runtime/symbol';\nexport { parseConfig, config } from './config';\nexport function init(printFunc = console.log, inputFunc, node = true, libs = { print: console.log }, context = new Context(), path = '') {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        initPrimitiveTypes();\n        const res = initialise(context, printFunc, inputFunc);\n        if (res instanceof ESError) {\n            return res;\n        }\n        setGlobalContext(context);\n        (_a = libs['context']) !== null && _a !== void 0 ? _a : (libs['context'] = context);\n        if (path) {\n            context.path = path;\n        }\n        if (libs.print) {\n            allLibs.print = libs.print;\n        }\n        if (node) {\n            runningInNode();\n            yield refreshPerformanceNow(true);\n            addNodeLibs(libs, context);\n        }\n        let modulePreloadRes = yield preloadModules(config.modules);\n        if (modulePreloadRes instanceof ESError) {\n            return modulePreloadRes;\n        }\n        return global;\n    });\n}\nexport function run(msg, { env = global, measurePerformance = false, fileName = '(unknown)', currentDir = '' } = {}) {\n    if (currentDir) {\n        env.path = currentDir;\n    }\n    Node.maxTime = 0;\n    Node.totalTime = 0;\n    Node.interprets = 0;\n    const timeData = {\n        total: 0,\n        lexerTotal: 0,\n        parserTotal: 0,\n        interpretTotal: 0,\n        nodeMax: 0,\n        nodeAvg: 0,\n        nodeTotal: 0,\n        interprets: 0,\n    };\n    let start = now();\n    if (!env.root.initialisedAsGlobal) {\n        const res = new interpretResult();\n        res.error = new ESError(Position.void, 'Uninitialised', 'Global context has not been initialised with global values');\n        return res;\n    }\n    const lexer = new Lexer(msg, fileName);\n    const lexerRes = lexer.generate();\n    if (lexerRes instanceof ESError) {\n        const res_ = new interpretResult();\n        res_.error = lexerRes;\n        return res_;\n    }\n    timeData.lexerTotal = now() - start;\n    start = now();\n    const parser = new Parser(lexerRes);\n    const res = parser.parse();\n    if (res.error) {\n        const res_ = new interpretResult();\n        res_.error = res.error;\n        return res_;\n    }\n    timeData.parserTotal = now() - start;\n    start = now();\n    if (!res.node) {\n        const res = new interpretResult();\n        res.val = new ESArray([]);\n        return res;\n    }\n    const finalRes = res.node.interpret(env);\n    timeData.interpretTotal = now() - start;\n    timeData.total = now() - start;\n    timeData.nodeMax = Node.maxTime;\n    timeData.nodeTotal = Node.totalTime;\n    timeData.nodeAvg = Node.totalTime / Node.interprets;\n    timeData.interprets = Node.interprets;\n    if (measurePerformance) {\n        console.log(timeData);\n    }\n    return Object.assign(Object.assign({}, finalRes), { timeData });\n}\nexport function parse(code, { fileName = '(unknown)', currentDir = '' } = {}) {\n    const lexer = new Lexer(code, fileName);\n    const lexerRes = lexer.generate();\n    if (lexerRes instanceof ESError) {\n        return {\n            error: lexerRes\n        };\n    }\n    const parser = new Parser(lexerRes);\n    const res = parser.parse();\n    if (res.error) {\n        return {\n            error: res.error\n        };\n    }\n    if (!res.node) {\n        return {\n            error: new ESError(Position.void, 'Error', 'no output')\n        };\n    }\n    return {\n        compileToJavaScript: (config) => {\n            if (!res.node)\n                throw 'res.node still undefined';\n            const comment = `// Generated by EntropyScript->JavaScript compiler v${VERSION}\\n`;\n            const stdStr = JS_STD_TXT_RAW.toString().replace(/(\\r\\n|\\n|\\r|\\t| )+/gm, ' ') + '\\n';\n            const out = res.node.compileJS(config);\n            if (out.error)\n                return out;\n            if (config.minify) {\n                out.val = out.val.replace(/(\\r\\n|\\n|\\r|\\t| )+/gm, ' ');\n            }\n            return new compileResult(comment + stdStr + out.val);\n        },\n        compileToPython: (config) => {\n            if (!res.node)\n                throw 'res.node still undefined';\n            const comment = `# Generated by EntropyScript->Python compiler v${VERSION}\\n\\n`;\n            const stdStr = PY_STD_TXT_RAW.toString() + '\\n';\n            const out = res.node.compilePy(config);\n            if (out.error)\n                return out;\n            return new compileResult(comment + stdStr + out.hoisted + '\\n' + out.val);\n        },\n        interpret: (env = global) => {\n            if (!res.node)\n                throw 'res.node still undefined';\n            if (currentDir) {\n                env.path = currentDir;\n            }\n            if (!env.root.initialisedAsGlobal) {\n                const res = new interpretResult();\n                res.error = new ESError(Position.void, 'Uninitialised', 'Global context has not been initialised with global values');\n                return res;\n            }\n            return res.node.interpret(env);\n        },\n    };\n}\n","import { Position } from \"../position\";\nimport { Context } from \"../runtime/context\";\nimport { ESError, ImportError, PermissionRequiredError } from '../errors';\nimport { ESFunction, ESNamespace, ESObject, ESString } from '../runtime/primitiveTypes';\nimport { str } from \"../util/util\";\nimport { config, run } from '../index';\nimport { addModule, getModule, moduleExist } from './builtInModules';\nimport { global, types, VALID_FILE_ENCODINGS } from \"../constants\";\nimport { ESJSBinding } from \"../runtime/primitives/esjsbinding\";\nfunction addNodeLibs(libs, context) {\n    const { fs, path } = libs;\n    for (let libName of Object.keys(libs)) {\n        addModule(libName, new ESJSBinding(libs[libName], libName));\n    }\n    context.set('import', new ESFunction(({ context }, rawPath) => {\n        if (!config.permissions.imports) {\n            return new PermissionRequiredError('Imports not allowed');\n        }\n        let scriptPath = str(rawPath);\n        if (config.permissions.useSTD && moduleExist(scriptPath)) {\n            return getModule(scriptPath);\n        }\n        scriptPath = path.join(context.path, scriptPath);\n        try {\n            if (!fs.existsSync(scriptPath)) {\n                if (fs.existsSync('./particles/' + scriptPath)) {\n                    if (fs.existsSync('particles/' + scriptPath + '/main.es')) {\n                        scriptPath = 'particles/' + scriptPath + '/main.es';\n                    }\n                    else {\n                        return new ESError(Position.void, 'ImportError', `Module '${scriptPath}' has no entry point. Requires 'main.es'.`);\n                    }\n                }\n                else {\n                    return new ESError(Position.void, 'ImportError', `Can't find file '${scriptPath}' to import.`);\n                }\n            }\n            const exDir = path.dirname(scriptPath);\n            const code = fs.readFileSync(scriptPath, 'utf-8');\n            const env = new Context();\n            env.parent = global;\n            env.path = exDir;\n            const n = new ESNamespace(new ESString(scriptPath), {});\n            const res = run(code, {\n                env,\n                fileName: scriptPath,\n                currentDir: exDir,\n            });\n            n.__value__ = env.getSymbolTableAsDict();\n            if (res.error) {\n                return res.error;\n            }\n            return n;\n        }\n        catch (E) {\n            return new ESError(Position.void, 'ImportError', E.toString());\n        }\n    }, [{ name: 'path', type: types.string }], 'import', undefined, types.object), {\n        forceThroughConst: true,\n        isConstant: true\n    });\n    context.setOwn('open', new ESFunction(({ context }, path_, encoding_) => {\n        if (!config.permissions.fileSystem) {\n            return new PermissionRequiredError('No access to file system');\n        }\n        const filePath = str(path_);\n        let encoding = str(encoding_);\n        if (VALID_FILE_ENCODINGS.indexOf(encoding) === -1) {\n            encoding = 'utf-8';\n        }\n        if (!fs.existsSync(filePath)) {\n            return new ImportError(Position.void, filePath);\n        }\n        return new ESObject({\n            str: new ESFunction(({ context }) => {\n                return new ESString(fs.readFileSync(path.join(context.path, filePath), encoding).toString());\n            }, [], 'str', undefined, types.string),\n            write: new ESFunction(({ context }, data) => {\n                fs.writeFileSync(context.path + filePath, str(data));\n            }, [{ name: 'path', type: types.string }]),\n            append: new ESFunction(({ context }, data) => {\n                fs.appendFileSync(context.path + filePath, str(data));\n            }, [{ name: 'path', type: types.string }]),\n        });\n    }));\n}\nexport default addNodeLibs;\n","export default \"Array.prototype.contains = function (element) {\\n\\treturn this.indexOf(element) !== -1;\\n};\\n\\nfunction parseNum (str) {\\n\\treturn parseFloat(str);\\n}\\n\\nconst print = console.log;\\n\\nNumber.prototype[Symbol.iterator] = function () {\\n\\treturn {\\n\\t\\tcurrent: 0,\\n\\t\\tlast: this,\\n\\t\\tnext() {\\n\\t\\t\\tif (this.current <= this.last) {\\n\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\tdone: false,\\n\\t\\t\\t\\t\\tvalue: this.current++\\n\\t\\t\\t\\t};\\n\\t\\t\\t} else {\\n\\t\\t\\t\\treturn { done: true };\\n\\t\\t\\t}\\n\\t\\t}\\n\\t};\\n};\\n\\nconst __private__ = {\\n\\tbims: {\\n\\t\\tmath: Math,\\n\\t\\ttime: {\\n\\t\\t\\tdate: Date,\\n\\t\\t\\tnow: Date.now,\\n\\t\\t},\\n\\t},\\n};\\n\\nif (typeof performance !== 'undefined') {\\n\\t__private__.bims.time.now = performance.now;\\n}\\n\\nfunction import_ (path) {\\n\\tif (__private__.bims.hasOwnProperty(path)) {\\n\\t\\treturn __private__.bims[path];\\n\\t}\\n}\\n\\nfunction range (minP, maxP, stepP) {\\n\\tif (typeof minP !== 'number') {\\n\\t\\treturn [];\\n\\t}\\n\\n\\tconst min = minP.valueOf();\\n\\n\\tif (typeof maxP === 'undefined') {\\n\\t\\ttry {\\n\\t\\t\\treturn [...Array(min).keys()];\\n\\t\\t} catch (e) {\\n\\t\\t\\tthrow `RangeError: Cannot make range of length '${min}'`;\\n\\t\\t}\\n\\t}\\n\\n\\tlet step = 1;\\n\\n\\tif (typeof maxP !== 'number') {\\n\\t\\tthrow 'TypeError: Expected number';\\n\\t}\\n\\n\\tlet max = maxP.valueOf();\\n\\n\\tif (typeof stepP !== 'undefined') {\\n\\t\\tif (typeof stepP !== 'number') {\\n\\t\\t\\tthrow 'TypeError: Expected number';\\n\\t\\t}\\n\\t\\tstep = stepP.valueOf();\\n\\t}\\n\\n\\tlet arr = [];\\n\\n\\tlet i = min;\\n\\twhile (i < max) {\\n\\t\\tarr.push(i);\\n\\t\\ti += step;\\n\\t}\\n\\n\\treturn arr;\\n}\";","export default \"\\n###############################\\n# START OF ENTROPY SCRIPT STD #\\n###############################\\nimport time\\n\\nlog = print\\nparseNum = float\\n\\ndef help(thing):\\n    return 'Help is not available in ES compiled Python'\\n\\n\\ndef GENERATE_PRIVATE():\\n    return {\\n        'modules': {\\n            'ascii': {\\n\\n            },\\n            'time': {\\n                'now': lambda: time.time_ns() / (10 ** 6)\\n            }\\n        }\\n    }\\n\\nPRIVATE = GENERATE_PRIVATE()\\n\\ndef import_ (path):\\n    if path in PRIVATE['modules']:\\n        return PRIVATE['modules'][path]\\n\\n\\n#############################\\n# END OF ENTROPY SCRIPT STD #\\n#############################\";"],"names":["root","factory","exports","module","define","amd","this","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","Position","constructor","idx","ln","col","file","advance","currentChar","clone","str","isUnknown","void","digits","identifierChars","global","setGlobalContext","c","stringSurrounds","IS_NODE_INSTANCE","window","runningInNode","VAR_DECLARE_KEYWORDS","VERSION","configFileName","VALID_FILE_ENCODINGS","print","console","log","KEYWORDS","now","refreshPerformanceNow","thisArg","_arguments","generator","Date","performance","e","P","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","apply","tokenType","tt","tokenTypeString","NUMBER","STRING","ENDSTATEMENT","IDENTIFIER","KEYWORD","COMMA","OBRACES","CBRACES","OPAREN","CPAREN","OSQUARE","CSQUARE","ASSIGN","ADD","SUB","MUL","DIV","POW","MOD","EQUALS","NOTEQUALS","NOT","GT","LT","GTE","LTE","AND","OR","COLON","DOT","EOF","APMERSAND","PIPE","BITWISE_NOT","QM","singleCharTokens","doubleCharTokens","tripleCharTokens","primitiveMethods","types","ESPrimitive","type","any","self","isa","props","type_check","is","ESBoolean","valueOf","__value__","typeName","__type__","has_property","describe","info","isBuiltIn","description","detail","res","strip","TypeError","assign","__add__","n","InvalidOperationError","__subtract__","__multiply__","__divide__","__pow__","__mod__","__eq__","__gt__","__lt__","__and__","__or__","__bool__","__pipe__","__ampersand__","__set_property__","__call__","parameters","ESErrorPrimitive","error","ESError","super","__get_property__","ESString","name","details","ESArray","traceback","map","s","position","line","wrap","IndexError","cast","bool","ESTypeUnion","ESTypeIntersection","ESUndefined","undefined","context","number","ESNumber","string","array","ESType","object","ESObject","ESFunction","boolean","val","length","substr","keys","k","thisElement","nElement","newOb","keysToRemove","Array","isArray","indexOf","toClone","thisType","nValue","func","arguments_","this_","returnType","closure","takeCallContextAsClosure","__closure__","params","ctx","path","_a","callContext","fn","newContext","parent","Context","max","Math","i","arg","typeIncludes","setOwn","forceThroughConst","setRes","generateESFunctionCallContext","Node","_b","interpret","funcReturn","callNode","push","callNative","thisReturnVal","args","defaultValue","required","v","ESNamespace","mutable","slice","symbol","isAccessible","isConstant","callBack","fTakesProps","toString","ESJSBinding","functionsTakeProps","initPrimitiveTypes","dealWithExtends","class_","instance","superFunc","__extends__","initFunc","__init__","res_","createInstance","runInit","on","primitive","__name__","method","__methods__","methodClone","__instances__","isPrimitive","t","ESTypeArray","left","right","leftRes","__left__","rightRes","__right__","ESTypeNot","__val__","pow","Boolean","helpLink","values","len","contains","element","newArr","num","parseFloat","isNaN","split","repeat","strToInsert","firstPart","lastPart","ESSymbol","identifier","options","_c","thing","Number","String","m","a","codes","red","yellow","green","cyan","blue","grey","code","asciiToChar","fromCharCode","charToAscii","char","charCodeAt","parse","json","JSON","stringify","AllowAny","config","permissions","networking","imports","accessDOM","useSTD","fileSystem","modules","pathAsString","p","substring","parsePartOfConfig","configJSON","unknownProps","filter","x","parseConfig","processedModules","moduleExist","getModule","processed","moduleDict","moduleRaw","processRawModule","builtInFunctions","minP","maxP","stepP","min","arr","returns","msgs","things","out","indent","total","entries","contents","id","has","set","recursive","global_","time","cb","sleep","symbolPrim","ReferenceError","getSymbol","initialise","globalContext","printFunc","inputFunc","rawUrl","url","ImportError","msg","cbRaw","addDependencyInjectedBIFs","builtIn","globalConstants","constant","load","initModRes","date","ascii","domRes","PermissionRequiredError","InvalidRuntimeError","w","$","document","dom","initModules","initialisedAsGlobal","symbolTable","deleted","path_","parent_","permissions_","hasOwn","getRawSymbolTableAsDict","symbols","getSymbolTableAsDict","remove","clear","resetAsGlobal","deepClone","interpretArgument","typeRes","defaultValRes","interpretResult","shouldBreak","shouldContinue","compileResult","hoisted","register","node","compilePy","pos","isTerminal","start","interpret_","interprets","totalTime","maxTime","N_binOp","opTok","l","r","lt","eq","gt","InvalidSyntaxError","compileJS","minify","switchers","op","N_unaryOp","numVal","abs","N_varAssign","varNameTok","assignType","isGlobal","isDeclaration","N_primitiveWrapper","typeCheckRes","currentVal","newVal","assignVal","declaration","N_if","comparison","ifTrue","ifFalse","compRes","highIndent","statementRes","ifTrueRes","ifFalseRes","N_statements","N_while","loop","shouldLoop","potentialError","comparisonRes","bodyRes","N_for","body","isGlobalIdentifier","isConstIdentifier","isGlobalId","isConstId","iteration","iteratorRes","N_array","items","shouldClone","interpreted","item","itemRes","N_objectLiteral","properties","keyNode","valueNode","topLevel","last","N_functionCall","to","arguments","join","funcRes","argRes","N_functionDefinition","argNames","returnTypeRes","param","hoistedName","generateRandomSymbol","N_return","valRes","N_yield","N_indexed","base","index","baseRes","indexRes","objectRes","keyRes","N_class","methods","extends_","init","extendsRes","initRes","N_namespace","statements","N_tryCatch","catchBlock","catchRes","N_number","N_string","N_variable","N_undefined","N_break","N_continue","hash","WeakMap","Function","create","getPrototypeOf","Map","from","Set","add","depth","ms","setTimeout","replace","characters","gen","charAt","floor","random","colouredStr","reverse","IllegalCharError","ExpectedCharError","expectedType","actualType","ref","TestFailed","Token","matches","Lexer","program","fileName","text","generate","tokens","includes","makeNumber","singleLineComment","multiLineComment","makeIdentifier","makeString","possibleAssignFirstChar","token","unknownChar","numStr","dotCount","strClose","idStr","posStart","tokType","triple","double","ParseResults","advanceCount","lastRegisteredAdvanceCount","reverseCount","registerAdvance","tryRegister","success","failure","Parser","tokenIdx","currentToken","amount","consume","errorMsg","clearEndStatements","firstStatement","statement","moreStatements","newLineCount","returnStatement","tryCatch","expr","isYield","exprRes","atom","tok","atomIdentifier","arrayExpr","objectExpr","ifExpr","prevNode","functionCall","tempNode","makeFunctionCall","makeIndex","power","binOp","factor","term","arithmeticExpr","comparisonExpr","initiateVar","whileExpr","forExpr","funcExpr","classExpr","namespace","ops","funcB","typeExpr","isConst","varName","bracesExp","addEndStatement","splice","condition","parameter","funcCore","methodId","elements","keyType","libs","fs","libName","rawPath","scriptPath","existsSync","exDir","dirname","readFileSync","env","run","currentDir","E","encoding_","filePath","encoding","write","data","writeFileSync","append","appendFileSync","modulePreloadRes","urls","fetch","splitUrl","scriptName","pop","preloadModules","measurePerformance","timeData","lexerTotal","parserTotal","interpretTotal","nodeMax","nodeAvg","nodeTotal","lexerRes","finalRes","compileToJavaScript","comment","stdStr","compileToPython"],"sourceRoot":""}